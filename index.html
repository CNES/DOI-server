<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src/site/markdown/index.md at 2019-04-07
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190407" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Reflow Maven Skin &#x2013; Digital Object Identifier Server</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="./" id="bannerLeft"><h2>Digital Object Identifier Server</h2>
</a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
      <li class=""><a href="index.html" title="Home">Home</a><span class="divider">/</span></li>
    <li class="active ">Digital Object Identifier Server</li>
      <li class="pull-right"><span class="divider">|</span>
<a href="https://github.com/CNES/DOI-server" class="externalLink" title="GitHub project">GitHub project</a></li>
      <li class="pull-right"><a href="https://github.com/CNES/DOI-server/releases" class="externalLink" title="Download">Download</a></li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Main</li>
    <li class="active"><a href="#"><span class="none"></span>Home</a></li>
    <li><a href="https://github.com/CNES/DOI-server" class="externalLink" title="GitHub project"><span class="none"></span>GitHub project</a></li>
      <li class="nav-header">ChangeLog</li>
    <li><a href="changelog.html" title="Change log"><span class="none"></span>Change log</a></li>
    <li><a href="file-activity.html" title="File activity"><span class="none"></span>File activity</a></li>
    <li><a href="dev-activity.html" title="Dev activity"><span class="none"></span>Dev activity</a></li>
      <li class="nav-header">Download</li>
    <li><a href="https://github.com/CNES/DOI-server/releases" class="externalLink" title="Download"><span class="none"></span>Download</a></li>
    <li><a href="https://github.com/CNES/DOI-server/blob/master/COPYING.LESSER" class="externalLink" title="License"><span class="none"></span>License</a></li>
      <li class="nav-header">Documentation</li>
    <li><a href="architecture.html" title="Architecture"><span class="none"></span>Architecture</a></li>
    <li><a href="usage.html" title="Usage"><span class="none"></span>Usage</a></li>
    <li><a href="configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
    <li><a href="mds_api.html" title="MDS API"><span class="none"></span>MDS API</a></li>
    <li><a href="citation_api.html" title="Citation API"><span class="none"></span>Citation API</a></li>
    <li><a href="apidocs/index.html" title="Javadoc"><span class="none"></span>Javadoc</a></li>
      <li class="nav-header">Contribute</li>
    <li><a href="https://github.com/CNES/DOI-server/blob/master/CONTRIBUTING.md" class="externalLink" title="Contribute"><span class="none"></span>Contribute</a></li>
    <li><a href="https://github.com/CNES/DOI-server/issues" class="externalLink" title="Issues"><span class="none"></span>Issues</a></li>
    <li><a href="https://github.com/CNES/DOI-server" class="externalLink" title="Fork on GitHub"><span class="none"></span>Fork on GitHub</a></li>
      <li class="nav-header">Maven documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-down"></span>Project Information</a>
    <ul class="nav nav-list">
    <li><a href="dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
    <li><a href="dependency-info.html" title="Dependency Information"><span class="none"></span>Dependency Information</a></li>
    <li><a href="distribution-management.html" title="Distribution Management"><span class="none"></span>Distribution Management</a></li>
    <li class="active"><a href="#"><span class="none"></span>About</a></li>
    <li><a href="licenses.html" title="Licenses"><span class="none"></span>Licenses</a></li>
    <li><a href="plugin-management.html" title="Plugin Management"><span class="none"></span>Plugin Management</a></li>
    <li><a href="plugins.html" title="Plugins"><span class="none"></span>Plugins</a></li>
    <li><a href="scm.html" title="Source Code Management"><span class="none"></span>Source Code Management</a></li>
    <li><a href="summary.html" title="Summary"><span class="none"></span>Summary</a></li>
    <li><a href="team.html" title="Team"><span class="none"></span>Team</a></li>
    </ul>
</li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="https://cnes.fr" title="CNES" class="builtBy"><img class="builtBy"  alt="logo" src="https://cnes.fr/sites/default/files/drupal/201707/image/is_logo_cnes_logo_7.jpg"  border=""  width="320"  height="" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<h1>Digital Object Identifier Server</h1>
<p>A Digital Object Identifier (DOI) is an alphanumeric string assigned to uniquely identify an object. It is tied to a metadata description of the object as well as to a digital location, such as a URL, where all the details about the object are accessible.</p>
<div class="section">
<h2><a name="a1-_Synopsis"></a>1- Synopsis</h2>
<p>This document provides the motivation of the project and the different instructions to both install and use the DOI-Server.</p></div>
<div class="section">
<h2><a name="a2-_Motivation"></a>2- Motivation</h2>
<p>To create a DOI, a user needs to be connected to DATACITE so that he sends the metadata and the URL of the landing page. Within an organization, the same password to DATACITE cannot be shared for all users of the organization.That&#x2019;s why DOI-Server has been created. It allows an user (human or programmatic client) to connect to a GUI (or a web service) in order to to a DOI. Each project has its own password to connect to DOI-Server and DOI-Server does the rest. With the DOI-Server, some clients are also provided : a python client, a Java client and a IHM. Each client uses the DOI-Server web services to handle the DOI. DOI-Server is also generic because he can host several plugins to handle the databases (projects, role and DOI number generation).</p></div>
<div class="section">
<h2><a name="a3-_Getting_Started"></a>3- Getting Started</h2>
<p>These instructions will get you a copy of the project up and running on your local machine for development and testing purposes. See deployment for notes on how to deploy the project on a live system.</p>
<div class="section">
<h3><a name="a3.1-_Prerequisities"></a>3.1- Prerequisities</h3>
<p>What things you need to install the software and how to install them</p>

<div>
<div>
<pre class="source">Openjdk version 1.8
Apache Maven 3.5.2
Git version 2.17.1
PostgreSQL version 9.2
</pre></div></div>

<p>PostgreSQL installation</p>

<div>
<div>
<pre class="source">// installing database
yum install postgresql-server postgresql-contrib

// init database
postgresql-setup initdb

// changing authentication mode
sed -i '/\(^host.*127.0.0.1\/32\)/s/ident/md5/' /var/lib/pgsql/data/pg_hba.conf

// starting postgreSQL
systemctl start postgresql

// attaching postgreSQL at boot
systemctl enable postgresql

// changing postgres user
su postgres
psql
\password
&lt;set the password&gt;
\q
exit
</pre></div></div>
</div>
<div class="section">
<h3><a name="a3.2-_Installing_for_developers"></a>3.2- Installing for developers</h3>
<div class="section">
<h4><a name="a3.2.1-_Installing"></a>3.2.1- Installing</h4>
<p>Clone the repository</p>

<div>
<div>
<pre class="source">git clone https://github.com/CNES/DOI-server.git &amp;&amp; cd DOI-server
git submodule init
git submodule update
</pre></div></div>

<p>Define the settings, which will be used for the compilation</p>

<div>
<div>
<pre class="source">mkdir $HOME/.m2
echo &quot;
&lt;settings&gt;
    &lt;servers&gt;
        &lt;server&gt;
            &lt;id&gt;dbpostgresql&lt;/id&gt;
            &lt;!-- user for the Postgres database admin --&gt;
            &lt;username&gt;&lt;/username&gt;
            &lt;!-- password for the Postgres database admin --&gt;
            &lt;password&gt;&lt;/password&gt;   
        &lt;/server&gt;     
    &lt;/servers&gt;
    
    &lt;profiles&gt;
        &lt;profile&gt;
            &lt;id&gt;inject-doiserver&lt;/id&gt;
            &lt;properties&gt;
                &lt;!-- password for doiserver user --&gt;
                &lt;doiserver-pwd&gt;&lt;/doiserver-pwd&gt;
                &lt;!-- password for the DOI-server admin --&gt;
                &lt;doi-admin-pwd&gt;&lt;/doi-admin-pwd&gt;                
            &lt;/properties&gt;            
        &lt;/profile&gt;
    &lt;/profiles&gt;
    
    &lt;activeProfiles&gt;
        &lt;activeProfile&gt;inject-doiserver&lt;/activeProfile&gt;
    &lt;/activeProfiles&gt;
        
&lt;/settings&gt;
&quot; &gt; $HOME/.m2/settings.xml

// compiling DOI-server and testing
cd DOI-server &amp;&amp; mvn clean install

// Testing integration tests
mvn verify -P integration-test

// Installing
java -jar DOI-server-1.0.0.jar

</pre></div></div>
</div>
<div class="section">
<h4><a name="a3.2.2-_Running_DOI-server"></a>3.2.2- Running DOI-server</h4>
<p>Creating the configuration file</p>

<div>
<div>
<pre class="source">java -Dlog4j.configurationFile=server/target/log4j2.xml -jar server/target/DOI-server-1.0.0.jar -d &gt; doi.conf
</pre></div></div>

<p>Filling the configuration file</p>

<div>
<div>
<pre class="source">vim doi.conf
</pre></div></div>

<p>Starting the server</p>

<div>
<div>
<pre class="source">java -Dlog4j.configurationFile=server/target/log4j2.xml -jar server/target/DOI-server-1.0.0.jar -f doi.conf --start
</pre></div></div>
</div></div>
<div class="section">
<h3><a name="a3.3-_Installing_for_end-users_.28izpack.29"></a>3.3- Installing for end-users (izpack)</h3>
<div class="section">
<h4><a name="a3.3.1-_Installing"></a>3.3.1- Installing</h4>
<p>Installing the package by IzPack</p>

<div>
<div>
<pre class="source">java -jar DOI-1.0.0.jar
</pre></div></div>
</div>
<div class="section">
<h4><a name="a3.3.2-_Runnig_DOI-server"></a>3.3.2- Runnig DOI-server</h4>
<p>Go to the installation path</p>

<div>
<div>
<pre class="source">cd $HOME/DOI
</pre></div></div>

<p>Running</p>

<div>
<div>
<pre class="source">./doi.sh start
</pre></div></div>
</div></div>
<div class="section">
<h3><a name="a3.3-_Connection_to_the_GUI"></a>3.3- Connection to the GUI</h3>

<div>
<div>
<pre class="source">firefox http(s)://localhost:&lt;port&gt;/ihm
</pre></div></div></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2017&#x2013;2019
<a href="https://cnes.fr">CNES</a>.
All rights reserved.        <li id="publishDate" class="pull-right">Last Published: 2019-04-07</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 1.0.0</li>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
