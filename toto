[[1;34mINFO[m] Scanning for projects...
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] [1mBuilding Digital Object Identifier Server 0.0.1-SNAPSHOT[m
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:resources[m [1m(default-resources)[m @ [36mDOI[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] Copying 2 resources
[[1;34mINFO[m] Copying 6 resources
[[1;34mINFO[m] Copying 1 resource
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.7.0:compile[m [1m(default-compile)[m @ [36mDOI[0;1m ---[m
[[1;34mINFO[m] Changes detected - recompiling the module!
[[1;34mINFO[m] Compiling 104 source files to /home/malapert/NetBeansProjects/DOI-server/target/classes
[[1;34mINFO[m] /home/malapert/NetBeansProjects/DOI-server/src/main/java/fr/cnes/doi/utils/HttpClientHelperPatch.java: Some input files use or override a deprecated API.
[[1;34mINFO[m] /home/malapert/NetBeansProjects/DOI-server/src/main/java/fr/cnes/doi/utils/HttpClientHelperPatch.java: Recompile with -Xlint:deprecation for details.
[[1;34mINFO[m] /home/malapert/NetBeansProjects/DOI-server/src/main/java/fr/cnes/doi/application/AbstractApplication.java: Some input files use unchecked or unsafe operations.
[[1;34mINFO[m] /home/malapert/NetBeansProjects/DOI-server/src/main/java/fr/cnes/doi/application/AbstractApplication.java: Recompile with -Xlint:unchecked for details.
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mbuild-helper-maven-plugin:3.0.0:add-test-source[m [1m(add-integration-test-sources)[m @ [36mDOI[0;1m ---[m
[[1;34mINFO[m] Test Source directory: /home/malapert/NetBeansProjects/DOI-server/src/it/java added.
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mbuild-helper-maven-plugin:3.0.0:add-test-resource[m [1m(add-integration-test-resources)[m @ [36mDOI[0;1m ---[m
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-resources-plugin:2.6:testResources[m [1m(default-testResources)[m @ [36mDOI[0;1m ---[m
[[1;34mINFO[m] Using 'UTF-8' encoding to copy filtered resources.
[[1;34mINFO[m] Copying 5 resources
[[1;34mINFO[m] Copying 3 resources
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-compiler-plugin:3.7.0:testCompile[m [1m(default-testCompile)[m @ [36mDOI[0;1m ---[m
[[1;34mINFO[m] Nothing to compile - all classes are up to date
[[1;34mINFO[m] 
[[1;34mINFO[m] [1m--- [0;32mmaven-surefire-plugin:2.12.4:test[m [1m(default-test)[m @ [36mDOI[0;1m ---[m
[[1;34mINFO[m] Surefire report directory: /home/malapert/NetBeansProjects/DOI-server/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running fr.cnes.doi.client.ClientProxyTest
Tests run: 4, Failures: 0, Errors: 0, Skipped: 4, Time elapsed: 0.03 sec
Running fr.cnes.doi.client.ClientMDSTest
------ TEST ClientMDS ------
22:21:46,612 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
22:21:46,612 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
22:21:46,612 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/home/malapert/NetBeansProjects/DOI-server/target/test-classes/logback.xml]
22:21:46,613 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs multiple times on the classpath.
22:21:46,613 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [jar:file:/home/malapert/.m2/repository/net/sourceforge/cobertura/cobertura/2.1.1/cobertura-2.1.1.jar!/logback.xml]
22:21:46,613 |-WARN in ch.qos.logback.classic.LoggerContext[default] - Resource [logback.xml] occurs at [file:/home/malapert/NetBeansProjects/DOI-server/target/test-classes/logback.xml]
22:21:46,640 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - debug attribute not set
22:21:46,641 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
22:21:46,643 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDERR]
22:21:46,654 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
22:21:46,673 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
22:21:46,674 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ASYNC_STDERR]
22:21:46,677 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDERR] to ch.qos.logback.classic.AsyncAppender[ASYNC_STDERR]
22:21:46,677 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_STDERR] - Attaching appender named [STDERR] to AsyncAppender.
22:21:46,677 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_STDERR] - Setting discardingThreshold to 0
22:21:46,678 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
22:21:46,678 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
22:21:46,678 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
22:21:46,680 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.boolex.JaninoEventEvaluator] for [evaluator] property
22:21:46,714 |-INFO in ch.qos.logback.classic.boolex.JaninoEventEvaluator@1921ad94 - Adding [return] prefix and a semicolon suffix. Expression becomes [return level < DEBUG;]
22:21:46,714 |-INFO in ch.qos.logback.classic.boolex.JaninoEventEvaluator@1921ad94 - See also http://logback.qos.ch/codes.html#block
22:21:46,775 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
22:21:46,775 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ASYNC_STDOUT]
22:21:46,776 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to ch.qos.logback.classic.AsyncAppender[ASYNC_STDOUT]
22:21:46,776 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_STDOUT] - Attaching appender named [STDOUT] to AsyncAppender.
22:21:46,776 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC_STDOUT] - Setting discardingThreshold to 0
22:21:46,776 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [org.mockserver.logging.DelayedFileCreationRollingFileAppender]
22:21:46,777 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [REQUEST_LOG]
22:21:46,781 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
22:21:46,790 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
22:21:46,790 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern ./mockserver_request.%d{yyyy-MM-dd}.%i.log for the active file
22:21:46,792 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@ee86bcb - The date pattern is 'yyyy-MM-dd' from file name pattern './mockserver_request.%d{yyyy-MM-dd}.%i.log'.
22:21:46,792 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@ee86bcb - Roll-over at midnight.
22:21:46,793 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@ee86bcb - Setting initial period to Fri Oct 19 22:21:46 CEST 2018
22:21:46,795 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [REQUEST] to INFO
22:21:46,795 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting additivity of logger [REQUEST] to false
22:21:46,795 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [REQUEST_LOG] to Logger[REQUEST]
22:21:46,795 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [org.mockserver] to INFO
22:21:46,795 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to WARN
22:21:46,795 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [ASYNC_STDERR] to Logger[ROOT]
22:21:46,795 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [ASYNC_STDOUT] to Logger[ROOT]
22:21:46,795 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
22:21:46,795 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@177bea38 - Registering current configuration as safe fallback point

2018-10-19 22:21:47,176 INFO o.m.m.MockServer MockServer started on port: 33835
2018-10-19 22:21:47,475 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:21:47,496 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Create a media
2018-10-19 22:21:47,931 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "operation successful",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:21:48,088 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data\n",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "42" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:48 GMT" ],
	    "Content-Language" : [ "en" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:21:48,090 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "operation successful",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data\n",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "42" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:48 GMT" ],
	    "Content-Language" : [ "en" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "operation successful",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:21:48,120 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:21:48,987 INFO o.m.m.MockServer MockServer started on port: 38575
2018-10-19 22:21:49,017 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:21:49,028 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to create a media due to bad input parameters
2018-10-19 22:21:49,063 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 400,
	    "body" : {
	      "type" : "STRING",
	      "string" : "one or more of the specified mime-types or urls are invalid",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:21:49,084 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data\n",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "42" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:49 GMT" ],
	    "Content-Language" : [ "en" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:21:49,085 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 400,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "one or more of the specified mime-types or urls are invalid",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data\n",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "42" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:49 GMT" ],
	    "Content-Language" : [ "en" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 400,
	  "body" : {
	    "type" : "STRING",
	    "string" : "one or more of the specified mime-types or urls are invalid",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:21:49,099 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:21:49,925 INFO o.m.m.MockServer MockServer started on port: 45195
2018-10-19 22:21:49,936 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:21:49,952 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to create a media due to an unauthorized request
2018-10-19 22:21:49,972 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 401,
	    "body" : {
	      "type" : "STRING",
	      "string" : "no login",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:21:49,999 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data\n",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "42" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:49 GMT" ],
	    "Content-Language" : [ "en" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:21:50,000 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 401,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data\n",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "42" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:49 GMT" ],
	    "Content-Language" : [ "en" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 401,
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:21:50,019 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:21:50,844 INFO o.m.m.MockServer MockServer started on port: 38953
2018-10-19 22:21:50,851 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:21:50,861 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to create a media due to a forbidden request
2018-10-19 22:21:50,882 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 403,
	    "body" : {
	      "type" : "STRING",
	      "string" : "login problem",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:21:50,909 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data\n",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "42" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:50 GMT" ],
	    "Content-Language" : [ "en" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:21:50,911 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 403,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data\n",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "42" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:50 GMT" ],
	    "Content-Language" : [ "en" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 403,
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:21:50,931 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:21:51,768 INFO o.m.m.MockServer MockServer started on port: 39147
2018-10-19 22:21:51,775 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:21:51,784 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to create a media due to an internal server error
2018-10-19 22:21:51,798 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 500,
	    "body" : {
	      "type" : "STRING",
	      "string" : "server internal error, try later and if problem persists please contact us",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:21:51,812 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data\n",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "42" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:51 GMT" ],
	    "Content-Language" : [ "en" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:21:51,813 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 500,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data\n",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "42" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:51 GMT" ],
	    "Content-Language" : [ "en" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 500,
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:21:51,824 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:21:52,643 INFO o.m.m.MockServer MockServer started on port: 45127
2018-10-19 22:21:52,647 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:21:52,652 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Create DOI metadata
2018-10-19 22:21:52,664 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 201,
	    "body" : {
	      "type" : "STRING",
	      "string" : "CREATED",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:21:53,564 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:53 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/metadata"
	}

2018-10-19 22:21:53,566 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 201,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "CREATED",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:53 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 201,
	  "body" : {
	    "type" : "STRING",
	    "string" : "CREATED",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:21:53,580 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:21:54,400 INFO o.m.m.MockServer MockServer started on port: 36103
2018-10-19 22:21:54,405 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:21:54,417 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to create DOI metadata due to wrong input parameters
2018-10-19 22:21:54,431 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 400,
	    "body" : {
	      "type" : "STRING",
	      "string" : "invalid XML, wrong prefix",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:21:54,944 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:54 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/metadata"
	}

2018-10-19 22:21:54,946 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 400,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "invalid XML, wrong prefix",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:54 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 400,
	  "body" : {
	    "type" : "STRING",
	    "string" : "invalid XML, wrong prefix",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:21:54,962 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:21:55,770 INFO o.m.m.MockServer MockServer started on port: 34191
2018-10-19 22:21:55,785 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:21:55,791 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to create DOI metadata due to an unauthorized request
2018-10-19 22:21:55,803 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 401,
	    "body" : {
	      "type" : "STRING",
	      "string" : "no login",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:21:56,362 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:56 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/metadata"
	}

An error occurred while processing the HTTP request.

java.util.concurrent.ExecutionException: org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header
	at org.eclipse.jetty.client.util.InputStreamResponseListener.get(InputStreamResponseListener.java:228)
	at org.restlet.ext.jetty.internal.JettyClientCall.sendRequest(JettyClientCall.java:275)
	at org.restlet.engine.adapter.ClientAdapter.commit(ClientAdapter.java:105)
	at org.restlet.engine.adapter.HttpClientHelper.handle(HttpClientHelper.java:119)
	at org.restlet.Client.handle(Client.java:153)
	at org.restlet.routing.Filter.doHandle(Filter.java:150)
	at org.restlet.routing.Filter.handle(Filter.java:197)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1092)
	at org.restlet.resource.ClientResource.handleOutbound(ClientResource.java:1176)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1047)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1023)
	at org.restlet.resource.ClientResource.post(ClientResource.java:1485)
	at fr.cnes.doi.client.ClientMDS.createMetadata(ClientMDS.java:734)
	at fr.cnes.doi.client.ClientMDSTest.testSpecCreateMetadataAsObj(ClientMDSTest.java:467)
	at fr.cnes.doi.client.ClientMDSTest.testCreateMetadataObj401(ClientMDSTest.java:542)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)
	at org.mockserver.junit.MockServerRule$1.evaluate(MockServerRule.java:110)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
Caused by: org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header
	at org.eclipse.jetty.client.AuthenticationProtocolHandler$AuthenticationListener.onComplete(AuthenticationProtocolHandler.java:111)
	at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:193)
	at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:185)
	at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:484)
	at org.eclipse.jetty.client.HttpReceiver.responseSuccess(HttpReceiver.java:393)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete(HttpReceiverOverHTTP.java:255)
	at org.eclipse.jetty.http.HttpParser.parseContent(HttpParser.java:1435)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1275)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.parse(HttpReceiverOverHTTP.java:142)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.readAndParse(HttpReceiverOverHTTP.java:107)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.process(HttpReceiverOverHTTP.java:70)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.receive(HttpReceiverOverHTTP.java:65)
	at org.eclipse.jetty.client.http.HttpChannelOverHTTP.receive(HttpChannelOverHTTP.java:75)
	at org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onFillable(HttpConnectionOverHTTP.java:100)
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546)
	at java.lang.Thread.run(Thread.java:748)
2018-10-19 22:21:56,370 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 401,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:56 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 401,
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:21:57,180 INFO o.m.m.MockServer MockServer started on port: 46703
2018-10-19 22:21:57,184 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:21:57,188 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to create DOI metadata due to a forbidden request
2018-10-19 22:21:57,200 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 403,
	    "body" : {
	      "type" : "STRING",
	      "string" : "login problem, quota exceeded",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:21:57,737 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:57 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/metadata"
	}

2018-10-19 22:21:57,740 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 403,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem, quota exceeded",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:57 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 403,
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem, quota exceeded",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:21:57,755 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:21:58,582 INFO o.m.m.MockServer MockServer started on port: 43979
2018-10-19 22:21:58,592 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:21:58,597 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to create DOI metadata due to a forbidden request
2018-10-19 22:21:58,608 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 500,
	    "body" : {
	      "type" : "STRING",
	      "string" : "server internal error, try later and if problem persists please contact us",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:21:59,327 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:59 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/metadata"
	}

2018-10-19 22:21:59,327 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 500,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:21:59 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 500,
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:21:59,334 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:00,127 INFO o.m.m.MockServer MockServer started on port: 41239
2018-10-19 22:22:00,131 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:00,140 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Delete DOI metadata
2018-10-19 22:22:00,154 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:00,188 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:00 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:00,189 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:00 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:00,218 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:01,032 INFO o.m.m.MockServer MockServer started on port: 37039
2018-10-19 22:22:01,035 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:01,040 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to delete DOI metadata due to an unauthorized request
2018-10-19 22:22:01,050 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 401,
	    "body" : {
	      "type" : "STRING",
	      "string" : "no login",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:01,077 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:01 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:01,078 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 401,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:01 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 401,
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

An error occurred while processing the HTTP request.

java.util.concurrent.ExecutionException: org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header
	at org.eclipse.jetty.client.util.InputStreamResponseListener.get(InputStreamResponseListener.java:228)
	at org.restlet.ext.jetty.internal.JettyClientCall.sendRequest(JettyClientCall.java:275)
	at org.restlet.engine.adapter.ClientAdapter.commit(ClientAdapter.java:105)
	at org.restlet.engine.adapter.HttpClientHelper.handle(HttpClientHelper.java:119)
	at org.restlet.Client.handle(Client.java:153)
	at org.restlet.routing.Filter.doHandle(Filter.java:150)
	at org.restlet.routing.Filter.handle(Filter.java:197)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1092)
	at org.restlet.resource.ClientResource.handleOutbound(ClientResource.java:1176)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1047)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1023)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:928)
	at org.restlet.resource.ClientResource.delete(ClientResource.java:548)
	at fr.cnes.doi.client.ClientMDS.deleteMetadata(ClientMDS.java:800)
	at fr.cnes.doi.client.ClientMDS.deleteMetadataDoiAsObject(ClientMDS.java:773)
	at fr.cnes.doi.client.ClientMDSTest.testSpecDeleteMetadataAsObj(ClientMDSTest.java:610)
	at fr.cnes.doi.client.ClientMDSTest.testDeleteMetadataObj401(ClientMDSTest.java:680)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)
	at org.mockserver.junit.MockServerRule$1.evaluate(MockServerRule.java:110)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
Caused by: org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header
	at org.eclipse.jetty.client.AuthenticationProtocolHandler$AuthenticationListener.onComplete(AuthenticationProtocolHandler.java:111)
	at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:193)
	at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:185)
	at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:484)
	at org.eclipse.jetty.client.HttpReceiver.responseSuccess(HttpReceiver.java:393)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete(HttpReceiverOverHTTP.java:255)
	at org.eclipse.jetty.http.HttpParser.parseContent(HttpParser.java:1435)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1275)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.parse(HttpReceiverOverHTTP.java:142)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.readAndParse(HttpReceiverOverHTTP.java:107)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.process(HttpReceiverOverHTTP.java:70)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.receive(HttpReceiverOverHTTP.java:65)
	at org.eclipse.jetty.client.http.HttpChannelOverHTTP.receive(HttpChannelOverHTTP.java:75)
	at org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onFillable(HttpConnectionOverHTTP.java:100)
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546)
	at java.lang.Thread.run(Thread.java:748)
2018-10-19 22:22:03,083 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:01 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:03,085 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 401,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:01 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 401,
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:03,100 INFO o.m.m.HttpStateHandler request not found exactly once, expected:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

 but was:

	[ {
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:01 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}, {
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:01 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	} ]

2018-10-19 22:22:03,100 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:03,898 INFO o.m.m.MockServer MockServer started on port: 34105
2018-10-19 22:22:03,902 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:03,910 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to delete DOI metadata due to a forbidden request
2018-10-19 22:22:03,927 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 403,
	    "body" : {
	      "type" : "STRING",
	      "string" : "login problem or dataset belongs to another party",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:03,973 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:03 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:03,974 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 403,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem or dataset belongs to another party",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:03 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 403,
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem or dataset belongs to another party",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:03,982 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:04,782 INFO o.m.m.MockServer MockServer started on port: 42625
2018-10-19 22:22:04,785 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:04,789 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to delete DOI metadata due to an unknown DOI
2018-10-19 22:22:04,801 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 404,
	    "body" : {
	      "type" : "STRING",
	      "string" : "DOI does not exist in our database",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:04,831 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:04 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:04,832 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 404,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "DOI does not exist in our database",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:04 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 404,
	  "body" : {
	    "type" : "STRING",
	    "string" : "DOI does not exist in our database",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:04,843 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:05,659 INFO o.m.m.MockServer MockServer started on port: 40389
2018-10-19 22:22:05,664 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:05,674 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to delete DOI metadata due to an internal server error
2018-10-19 22:22:05,683 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 500,
	    "body" : {
	      "type" : "STRING",
	      "string" : "server internal error, try later and if problem persists please contact us",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:05,726 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:05 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:05,727 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 500,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:05 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 500,
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:05,734 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:06,588 INFO o.m.m.MockServer MockServer started on port: 39199
2018-10-19 22:22:06,594 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:06,598 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Get collection
2018-10-19 22:22:06,609 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "10.5072/EDU/TESTID",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:06,619 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/doi",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:06 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/doi"
	}

2018-10-19 22:22:06,619 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "10.5072/EDU/TESTID",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/doi",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:06 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "10.5072/EDU/TESTID",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:06,625 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:07,427 INFO o.m.m.MockServer MockServer started on port: 39967
2018-10-19 22:22:07,430 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:07,437 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Get empty collection
2018-10-19 22:22:07,444 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 204
	  }
	}

2018-10-19 22:22:07,465 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/doi",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:07 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/doi"
	}

2018-10-19 22:22:07,466 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 204,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/doi",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:07 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 204
	}

2018-10-19 22:22:07,473 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:08,277 INFO o.m.m.MockServer MockServer started on port: 45105
2018-10-19 22:22:08,281 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:08,284 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Get media
2018-10-19 22:22:08,295 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "application/fits=http://cnes.fr/test-data",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:08,302 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:08 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:08,303 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:08 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:08,308 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:09,095 INFO o.m.m.MockServer MockServer started on port: 33893
2018-10-19 22:22:09,102 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:09,105 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to get media due to an unauthorized request
2018-10-19 22:22:09,114 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 401,
	    "body" : {
	      "type" : "STRING",
	      "string" : "no login",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:09,122 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:09 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:09,122 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 401,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:09 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 401,
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:09,129 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:09,928 INFO o.m.m.MockServer MockServer started on port: 34325
2018-10-19 22:22:09,937 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:09,941 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to get media due to a forbidden request
2018-10-19 22:22:09,948 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 403,
	    "body" : {
	      "type" : "STRING",
	      "string" : "login problem or dataset belongs to another party",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:09,957 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:09 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:09,958 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 403,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem or dataset belongs to another party",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:09 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 403,
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem or dataset belongs to another party",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:09,966 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:10,778 INFO o.m.m.MockServer MockServer started on port: 33749
2018-10-19 22:22:10,782 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:10,786 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to get media due to an unknown DOI
2018-10-19 22:22:10,793 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 404,
	    "body" : {
	      "type" : "STRING",
	      "string" : "No media attached to the DOI or DOI does not exist in our database",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:10,799 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:10 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:10,800 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 404,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "No media attached to the DOI or DOI does not exist in our database",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:10 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 404,
	  "body" : {
	    "type" : "STRING",
	    "string" : "No media attached to the DOI or DOI does not exist in our database",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:10,807 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:11,613 INFO o.m.m.MockServer MockServer started on port: 39831
2018-10-19 22:22:11,616 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:11,620 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to get media due to an internal server error
2018-10-19 22:22:11,628 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 500,
	    "body" : {
	      "type" : "STRING",
	      "string" : "server internal error, try later and if problem persists please contact us",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:11,636 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:11 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:11,637 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 500,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:11 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 500,
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:11,645 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:12,443 INFO o.m.m.MockServer MockServer started on port: 36995
2018-10-19 22:22:12,453 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:12,461 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Delete DOI metadata
2018-10-19 22:22:12,468 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:12,482 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:12 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:12,483 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:12 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:12,489 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:13,283 INFO o.m.m.MockServer MockServer started on port: 36283
2018-10-19 22:22:13,293 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:13,301 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to delete DOI metadata due to an unauthorized request
2018-10-19 22:22:13,308 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 401,
	    "body" : {
	      "type" : "STRING",
	      "string" : "no login",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:13,314 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:13 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:13,315 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 401,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:13 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 401,
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:13,320 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:14,111 INFO o.m.m.MockServer MockServer started on port: 45213
2018-10-19 22:22:14,114 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:14,116 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to delete DOI metadata due to a forbidden request
2018-10-19 22:22:14,123 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 403,
	    "body" : {
	      "type" : "STRING",
	      "string" : "login problem or dataset belongs to another party",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:14,136 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:14 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:14,137 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 403,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem or dataset belongs to another party",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:14 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 403,
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem or dataset belongs to another party",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:14,143 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:14,942 INFO o.m.m.MockServer MockServer started on port: 45819
2018-10-19 22:22:14,946 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:14,965 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to delete DOI metadata due to an unknown DOI
2018-10-19 22:22:14,974 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 404,
	    "body" : {
	      "type" : "STRING",
	      "string" : "DOI does not exist in our database",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:14,984 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:14 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:14,985 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 404,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "DOI does not exist in our database",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:14 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 404,
	  "body" : {
	    "type" : "STRING",
	    "string" : "DOI does not exist in our database",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:14,991 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:15,790 INFO o.m.m.MockServer MockServer started on port: 33821
2018-10-19 22:22:15,798 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:15,801 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to delete DOI metadata due to an internal server error
2018-10-19 22:22:15,808 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 500,
	    "body" : {
	      "type" : "STRING",
	      "string" : "server internal error, try later and if problem persists please contact us",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:15,817 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:15 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:15,817 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 500,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:15 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 500,
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:15,825 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:16,641 INFO o.m.m.MockServer MockServer started on port: 40387
2018-10-19 22:22:16,650 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:16,659 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Get successfull DOI metadata
2018-10-19 22:22:16,681 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:16,697 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:16 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:16,699 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:16 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:16,708 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:17,501 INFO o.m.m.MockServer MockServer started on port: 36671
2018-10-19 22:22:17,512 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:17,521 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to get DOI metadata due to an unauthorized request
2018-10-19 22:22:17,528 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 401,
	    "body" : {
	      "type" : "STRING",
	      "string" : "no login",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:17,535 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:17 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:17,536 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 401,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:17 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 401,
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

An error occurred while processing the HTTP request.

java.util.concurrent.ExecutionException: org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header
	at org.eclipse.jetty.client.util.InputStreamResponseListener.get(InputStreamResponseListener.java:228)
	at org.restlet.ext.jetty.internal.JettyClientCall.sendRequest(JettyClientCall.java:275)
	at org.restlet.engine.adapter.ClientAdapter.commit(ClientAdapter.java:105)
	at org.restlet.engine.adapter.HttpClientHelper.handle(HttpClientHelper.java:119)
	at org.restlet.Client.handle(Client.java:153)
	at org.restlet.routing.Filter.doHandle(Filter.java:150)
	at org.restlet.routing.Filter.handle(Filter.java:197)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1092)
	at org.restlet.resource.ClientResource.handleOutbound(ClientResource.java:1176)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1047)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1065)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:960)
	at org.restlet.resource.ClientResource.get(ClientResource.java:678)
	at fr.cnes.doi.client.ClientMDS.getMetadata(ClientMDS.java:645)
	at fr.cnes.doi.client.ClientMDSTest.testSpectGetMetadata(ClientMDSTest.java:212)
	at fr.cnes.doi.client.ClientMDSTest.testGetMetadata401(ClientMDSTest.java:388)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)
	at org.mockserver.junit.MockServerRule$1.evaluate(MockServerRule.java:110)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
Caused by: org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header
	at org.eclipse.jetty.client.AuthenticationProtocolHandler$AuthenticationListener.onComplete(AuthenticationProtocolHandler.java:111)
	at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:193)
	at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:185)
	at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:484)
	at org.eclipse.jetty.client.HttpReceiver.responseSuccess(HttpReceiver.java:393)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete(HttpReceiverOverHTTP.java:255)
	at org.eclipse.jetty.http.HttpParser.parseContent(HttpParser.java:1435)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1275)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.parse(HttpReceiverOverHTTP.java:142)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.readAndParse(HttpReceiverOverHTTP.java:107)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.process(HttpReceiverOverHTTP.java:70)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.receive(HttpReceiverOverHTTP.java:65)
	at org.eclipse.jetty.client.http.HttpChannelOverHTTP.receive(HttpChannelOverHTTP.java:75)
	at org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onFillable(HttpConnectionOverHTTP.java:100)
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546)
	at java.lang.Thread.run(Thread.java:748)
2018-10-19 22:22:19,540 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:17 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:19,541 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 401,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:17 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 401,
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:19,549 INFO o.m.m.HttpStateHandler request not found exactly once, expected:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

 but was:

	[ {
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:17 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}, {
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:17 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	} ]

2018-10-19 22:22:19,550 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:20,362 INFO o.m.m.MockServer MockServer started on port: 46783
2018-10-19 22:22:20,371 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:20,381 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to get DOI metadata due to a forbidden request
2018-10-19 22:22:20,401 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 403,
	    "body" : {
	      "type" : "STRING",
	      "string" : "login problem or dataset belongs to another party",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:20,420 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:20 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:20,423 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 403,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem or dataset belongs to another party",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:20 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 403,
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem or dataset belongs to another party",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:20,438 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:21,236 INFO o.m.m.MockServer MockServer started on port: 40869
2018-10-19 22:22:21,238 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:21,241 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to get DOI metadata due to an unknown DOI
2018-10-19 22:22:21,249 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 404,
	    "body" : {
	      "type" : "STRING",
	      "string" : "DOI does not exist in our database",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:21,258 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:21 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:21,258 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 404,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "DOI does not exist in our database",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:21 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 404,
	  "body" : {
	    "type" : "STRING",
	    "string" : "DOI does not exist in our database",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:21,264 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:22,051 INFO o.m.m.MockServer MockServer started on port: 36949
2018-10-19 22:22:22,055 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:22,058 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to get DOI metadata due to an inactive DOI
2018-10-19 22:22:22,064 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 410,
	    "body" : {
	      "type" : "STRING",
	      "string" : "the requested dataset was marked inactive",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:22,072 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:22 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:22,073 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 410,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "the requested dataset was marked inactive",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:22 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 410,
	  "body" : {
	    "type" : "STRING",
	    "string" : "the requested dataset was marked inactive",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:22,078 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:22,869 INFO o.m.m.MockServer MockServer started on port: 44481
2018-10-19 22:22:22,878 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:22,881 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to get DOI metadata due to an internal serer error
2018-10-19 22:22:22,887 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 500,
	    "body" : {
	      "type" : "STRING",
	      "string" : "server internal error, try later and if problem persists please contact us",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:22,893 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:22 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:22,894 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 500,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:22 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 500,
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:22,899 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:23,693 INFO o.m.m.MockServer MockServer started on port: 45989
2018-10-19 22:22:23,702 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:23,711 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Get DOI
2018-10-19 22:22:23,717 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:23,723 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:23 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605"
	}

2018-10-19 22:22:23,723 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:23 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:23,731 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:24,525 INFO o.m.m.MockServer MockServer started on port: 43233
2018-10-19 22:22:24,533 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:24,543 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Get DOI no content
2018-10-19 22:22:24,549 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 204
	  }
	}

2018-10-19 22:22:24,561 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:24 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605"
	}

2018-10-19 22:22:24,561 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 204,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:24 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 204
	}

2018-10-19 22:22:24,568 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:25,358 INFO o.m.m.MockServer MockServer started on port: 46255
2018-10-19 22:22:25,367 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:25,371 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Get not allowed DOI
2018-10-19 22:22:25,379 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 401,
	    "body" : {
	      "type" : "STRING",
	      "string" : "Bad credentials",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:25,389 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:25 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605"
	}

2018-10-19 22:22:25,389 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 401,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "Bad credentials",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:25 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 401,
	  "body" : {
	    "type" : "STRING",
	    "string" : "Bad credentials",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:25,395 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:26,207 INFO o.m.m.MockServer MockServer started on port: 38867
2018-10-19 22:22:26,222 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:26,226 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Get unauthorized DOI
2018-10-19 22:22:26,232 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 403,
	    "body" : {
	      "type" : "STRING",
	      "string" : "login problem or dataset belongs to another party",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:26,240 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:26 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605"
	}

2018-10-19 22:22:26,241 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 403,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem or dataset belongs to another party",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:26 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 403,
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem or dataset belongs to another party",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:26,246 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:27,052 INFO o.m.m.MockServer MockServer started on port: 43127
2018-10-19 22:22:27,055 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:27,058 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Get not found DOI
2018-10-19 22:22:27,065 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 404,
	    "body" : {
	      "type" : "STRING",
	      "string" : "DOI not found",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:27,078 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:27 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605"
	}

2018-10-19 22:22:27,079 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 404,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "DOI not found",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:27 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 404,
	  "body" : {
	    "type" : "STRING",
	    "string" : "DOI not found",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:27,084 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:27,873 INFO o.m.m.MockServer MockServer started on port: 40459
2018-10-19 22:22:27,876 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:27,879 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Get DOI with internal server error
2018-10-19 22:22:27,888 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 500,
	    "body" : {
	      "type" : "STRING",
	      "string" : "server internal error, try later and if problem persists please contact us",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:27,909 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:27 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605"
	}

2018-10-19 22:22:27,909 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 500,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:27 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 500,
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:27,914 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:28,725 INFO o.m.m.MockServer MockServer started on port: 39867
2018-10-19 22:22:28,729 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:28,735 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Create DOI metadata
2018-10-19 22:22:28,748 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 201,
	    "body" : {
	      "type" : "STRING",
	      "string" : "CREATED",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:29,369 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:29 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/metadata"
	}

2018-10-19 22:22:29,370 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 201,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "CREATED",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:29 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 201,
	  "body" : {
	    "type" : "STRING",
	    "string" : "CREATED",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:29,376 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:30,182 INFO o.m.m.MockServer MockServer started on port: 41825
2018-10-19 22:22:30,184 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:30,194 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to create DOI metadata due to wrong input parameters
2018-10-19 22:22:30,200 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 400,
	    "body" : {
	      "type" : "STRING",
	      "string" : "invalid XML, wrong prefix",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:30,727 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:30 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/metadata"
	}

2018-10-19 22:22:30,730 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 400,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "invalid XML, wrong prefix",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:30 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 400,
	  "body" : {
	    "type" : "STRING",
	    "string" : "invalid XML, wrong prefix",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:30,745 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:31,546 INFO o.m.m.MockServer MockServer started on port: 44173
2018-10-19 22:22:31,555 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:31,559 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to create DOI metadata due to an unauthorized request
2018-10-19 22:22:31,564 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 401,
	    "body" : {
	      "type" : "STRING",
	      "string" : "no login",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:32,045 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:32 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/metadata"
	}

2018-10-19 22:22:32,046 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 401,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:32 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 401,
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

An error occurred while processing the HTTP request.

java.util.concurrent.ExecutionException: org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header
	at org.eclipse.jetty.client.util.InputStreamResponseListener.get(InputStreamResponseListener.java:228)
	at org.restlet.ext.jetty.internal.JettyClientCall.sendRequest(JettyClientCall.java:275)
	at org.restlet.engine.adapter.ClientAdapter.commit(ClientAdapter.java:105)
	at org.restlet.engine.adapter.HttpClientHelper.handle(HttpClientHelper.java:119)
	at org.restlet.Client.handle(Client.java:153)
	at org.restlet.routing.Filter.doHandle(Filter.java:150)
	at org.restlet.routing.Filter.handle(Filter.java:197)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1092)
	at org.restlet.resource.ClientResource.handleOutbound(ClientResource.java:1176)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1047)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1023)
	at org.restlet.resource.ClientResource.post(ClientResource.java:1485)
	at fr.cnes.doi.client.ClientMDS.createMetadata(ClientMDS.java:734)
	at fr.cnes.doi.client.ClientMDS.createMetadata(ClientMDS.java:670)
	at fr.cnes.doi.client.ClientMDSTest.testSpecCreateMetadata(ClientMDSTest.java:436)
	at fr.cnes.doi.client.ClientMDSTest.testCreateMetadata401(ClientMDSTest.java:502)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)
	at org.mockserver.junit.MockServerRule$1.evaluate(MockServerRule.java:110)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
Caused by: org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header
	at org.eclipse.jetty.client.AuthenticationProtocolHandler$AuthenticationListener.onComplete(AuthenticationProtocolHandler.java:111)
	at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:193)
	at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:185)
	at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:484)
	at org.eclipse.jetty.client.HttpReceiver.responseSuccess(HttpReceiver.java:393)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete(HttpReceiverOverHTTP.java:255)
	at org.eclipse.jetty.http.HttpParser.parseContent(HttpParser.java:1435)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1275)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.parse(HttpReceiverOverHTTP.java:142)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.readAndParse(HttpReceiverOverHTTP.java:107)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.process(HttpReceiverOverHTTP.java:70)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.receive(HttpReceiverOverHTTP.java:65)
	at org.eclipse.jetty.client.http.HttpChannelOverHTTP.receive(HttpChannelOverHTTP.java:75)
	at org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onFillable(HttpConnectionOverHTTP.java:100)
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546)
	at java.lang.Thread.run(Thread.java:748)
2018-10-19 22:22:32,841 INFO o.m.m.MockServer MockServer started on port: 43263
2018-10-19 22:22:32,844 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:32,847 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to create DOI metadata due to a forbidden request
2018-10-19 22:22:32,852 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 403,
	    "body" : {
	      "type" : "STRING",
	      "string" : "login problem, quota exceeded",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:33,367 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:33 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/metadata"
	}

2018-10-19 22:22:33,368 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 403,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem, quota exceeded",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:33 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 403,
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem, quota exceeded",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:33,383 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:34,184 INFO o.m.m.MockServer MockServer started on port: 35021
2018-10-19 22:22:34,192 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:34,202 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Fail to create DOI metadata due to a forbidden request
2018-10-19 22:22:34,208 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 500,
	    "body" : {
	      "type" : "STRING",
	      "string" : "server internal error, try later and if problem persists please contact us",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:34,683 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:34 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/metadata"
	}

2018-10-19 22:22:34,683 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 500,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier><creators><creator><creatorName>CNES</creatorName></creator></creators><titles><title>Le portail ￃﾉduthￃﾨque</title></titles><publisher>CNES</publisher><publicationYear>2015</publicationYear><resourceType resourceTypeGeneral=\"Other\">Portail ￃﾉduthￃﾨque</resourceType></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "632" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:34 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 500,
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:34,689 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:35,513 INFO o.m.m.MockServer MockServer started on port: 42391
2018-10-19 22:22:35,522 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:35,525 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: CheckIfOneCharIsNotValid
2018-10-19 22:22:36,318 INFO o.m.m.MockServer MockServer started on port: 33025
2018-10-19 22:22:36,327 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:36,330 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Get successfull DOI metadata
2018-10-19 22:22:36,335 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:36,360 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:36 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:36,360 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:36 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/EDU/TESTID</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:36,384 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:37,196 INFO o.m.m.MockServer MockServer started on port: 46013
2018-10-19 22:22:37,203 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:37,205 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: CheckIfAllCharsAreValid
2018-10-19 22:22:37,993 INFO o.m.m.MockServer MockServer started on port: 39739
2018-10-19 22:22:37,997 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:38,000 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Create a DOI
2018-10-19 22:22:38,007 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 201,
	    "body" : {
	      "type" : "STRING",
	      "string" : "CREATED",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:38,014 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/EDU/TESTID\nurl=https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "87" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:38 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/doi"
	}

2018-10-19 22:22:38,014 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 201,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "CREATED",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/EDU/TESTID\nurl=https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "87" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:38 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 201,
	  "body" : {
	    "type" : "STRING",
	    "string" : "CREATED",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:38,021 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:38,864 INFO o.m.m.MockServer MockServer started on port: 36673
2018-10-19 22:22:38,868 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:38,871 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Create a DOI with a bad request
2018-10-19 22:22:38,876 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 400,
	    "body" : {
	      "type" : "STRING",
	      "string" : "request body must be exactly two lines: DOI and URL; wrong domain, wrong prefix",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:38,888 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/EDU/TESTID\nurl=https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "87" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:38 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/doi"
	}

2018-10-19 22:22:38,888 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 400,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "request body must be exactly two lines: DOI and URL; wrong domain, wrong prefix",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/EDU/TESTID\nurl=https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "87" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:38 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 400,
	  "body" : {
	    "type" : "STRING",
	    "string" : "request body must be exactly two lines: DOI and URL; wrong domain, wrong prefix",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:38,897 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:39,691 INFO o.m.m.MockServer MockServer started on port: 44723
2018-10-19 22:22:39,693 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:39,696 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Create unauthorized DOI
2018-10-19 22:22:39,701 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 401,
	    "body" : {
	      "type" : "STRING",
	      "string" : "no login",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:39,708 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/EDU/TESTID\nurl=https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "87" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:39 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/doi"
	}

2018-10-19 22:22:39,708 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 401,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/EDU/TESTID\nurl=https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "87" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:39 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 401,
	  "body" : {
	    "type" : "STRING",
	    "string" : "no login",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

An error occurred while processing the HTTP request.

java.util.concurrent.ExecutionException: org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header
	at org.eclipse.jetty.client.util.InputStreamResponseListener.get(InputStreamResponseListener.java:228)
	at org.restlet.ext.jetty.internal.JettyClientCall.sendRequest(JettyClientCall.java:275)
	at org.restlet.engine.adapter.ClientAdapter.commit(ClientAdapter.java:105)
	at org.restlet.engine.adapter.HttpClientHelper.handle(HttpClientHelper.java:119)
	at org.restlet.Client.handle(Client.java:153)
	at org.restlet.routing.Filter.doHandle(Filter.java:150)
	at org.restlet.routing.Filter.handle(Filter.java:197)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1092)
	at org.restlet.resource.ClientResource.handleOutbound(ClientResource.java:1176)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1047)
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1065)
	at org.restlet.resource.ClientResource.post(ClientResource.java:1466)
	at fr.cnes.doi.client.ClientMDS.createDoi(ClientMDS.java:572)
	at fr.cnes.doi.client.ClientMDSTest.testSpecCreateDoi(ClientMDSTest.java:170)
	at fr.cnes.doi.client.ClientMDSTest.testCreateDoi401(ClientMDSTest.java:340)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)
	at org.mockserver.junit.MockServerRule$1.evaluate(MockServerRule.java:110)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)
Caused by: org.eclipse.jetty.client.HttpResponseException: HTTP protocol violation: Authentication challenge without WWW-Authenticate header
	at org.eclipse.jetty.client.AuthenticationProtocolHandler$AuthenticationListener.onComplete(AuthenticationProtocolHandler.java:111)
	at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:193)
	at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:185)
	at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:484)
	at org.eclipse.jetty.client.HttpReceiver.responseSuccess(HttpReceiver.java:393)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete(HttpReceiverOverHTTP.java:255)
	at org.eclipse.jetty.http.HttpParser.parseContent(HttpParser.java:1435)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1275)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.parse(HttpReceiverOverHTTP.java:142)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.readAndParse(HttpReceiverOverHTTP.java:107)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.process(HttpReceiverOverHTTP.java:70)
	at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.receive(HttpReceiverOverHTTP.java:65)
	at org.eclipse.jetty.client.http.HttpChannelOverHTTP.receive(HttpChannelOverHTTP.java:75)
	at org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onFillable(HttpConnectionOverHTTP.java:100)
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540)
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546)
	at java.lang.Thread.run(Thread.java:748)
2018-10-19 22:22:40,498 INFO o.m.m.MockServer MockServer started on port: 44515
2018-10-19 22:22:40,506 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:40,509 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Create forbidden DOI
2018-10-19 22:22:40,516 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 403,
	    "body" : {
	      "type" : "STRING",
	      "string" : "login problem, quota exceeded",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:40,521 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/EDU/TESTID\nurl=https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "87" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:40 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/doi"
	}

2018-10-19 22:22:40,522 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 403,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem, quota exceeded",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/EDU/TESTID\nurl=https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "87" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:40 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 403,
	  "body" : {
	    "type" : "STRING",
	    "string" : "login problem, quota exceeded",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:40,527 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:41,318 INFO o.m.m.MockServer MockServer started on port: 45605
2018-10-19 22:22:41,326 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:41,335 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Create DOI with precondition
2018-10-19 22:22:41,352 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 412,
	    "body" : {
	      "type" : "STRING",
	      "string" : "metadata must be uploaded first",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:41,370 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/EDU/TESTID\nurl=https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "87" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:41 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/doi"
	}

2018-10-19 22:22:41,372 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 412,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "metadata must be uploaded first",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/EDU/TESTID\nurl=https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "87" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:41 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 412,
	  "body" : {
	    "type" : "STRING",
	    "string" : "metadata must be uploaded first",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:41,387 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:42,192 INFO o.m.m.MockServer MockServer started on port: 43681
2018-10-19 22:22:42,201 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:42,204 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: Create DOI with internal server error
2018-10-19 22:22:42,210 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 500,
	    "body" : {
	      "type" : "STRING",
	      "string" : "server internal error, try later and if problem persists please contact us",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:42,216 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/EDU/TESTID\nurl=https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "87" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:42 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/doi"
	}

2018-10-19 22:22:42,217 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 500,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/EDU/TESTID\nurl=https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "87" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:42 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 500,
	  "body" : {
	    "type" : "STRING",
	    "string" : "server internal error, try later and if problem persists please contact us",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:42,221 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

Tests run: 53, Failures: 5, Errors: 0, Skipped: 0, Time elapsed: 56.944 sec <<< FAILURE!
testCreateMetadataObj401(fr.cnes.doi.client.ClientMDSTest)  Time elapsed: 1.16 sec  <<< FAILURE!
java.lang.AssertionError: Test the status code expected:<401> but was:<1001>
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:645)
	at fr.cnes.doi.client.ClientMDSTest.testSpecCreateMetadataAsObj(ClientMDSTest.java:473)
	at fr.cnes.doi.client.ClientMDSTest.testCreateMetadataObj401(ClientMDSTest.java:542)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)
	at org.mockserver.junit.MockServerRule$1.evaluate(MockServerRule.java:110)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)

testDeleteMetadataObj401(fr.cnes.doi.client.ClientMDSTest)  Time elapsed: 2.62 sec  <<< FAILURE!
java.lang.AssertionError: Request not found exactly once, expected:<{
  "method" : "DELETE",
  "path" : "/metadata/10.5072/EDU/TESTID"
}> but was:<[ {
  "method" : "DELETE",
  "path" : "/metadata/10.5072/EDU/TESTID",
  "headers" : {
    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
    "content-length" : [ "0" ],
    "Accept" : [ "*/*" ],
    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
    "Host" : [ "localhost:1081" ],
    "Accept-Encoding" : [ "gzip" ],
    "Date" : [ "Fri, 19 Oct 2018 20:22:01 GMT" ]
  },
  "keepAlive" : true,
  "secure" : false
}, {
  "method" : "DELETE",
  "path" : "/metadata/10.5072/EDU/TESTID",
  "headers" : {
    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
    "content-length" : [ "0" ],
    "Accept" : [ "*/*" ],
    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
    "Host" : [ "localhost:1081" ],
    "Accept-Encoding" : [ "gzip" ],
    "Date" : [ "Fri, 19 Oct 2018 20:22:01 GMT" ]
  },
  "keepAlive" : true,
  "secure" : false
} ]>
	at org.mockserver.client.AbstractClient.verify(AbstractClient.java:277)
	at fr.cnes.doi.MockupServer.verifySpec(MockupServer.java:67)
	at fr.cnes.doi.MdsSpec.verifySpec(MdsSpec.java:159)
	at fr.cnes.doi.client.ClientMDSTest.testSpecDeleteMetadataAsObj(ClientMDSTest.java:624)
	at fr.cnes.doi.client.ClientMDSTest.testDeleteMetadataObj401(ClientMDSTest.java:680)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)
	at org.mockserver.junit.MockServerRule$1.evaluate(MockServerRule.java:110)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)

testGetMetadata401(fr.cnes.doi.client.ClientMDSTest)  Time elapsed: 2.61 sec  <<< FAILURE!
java.lang.AssertionError: Request not found exactly once, expected:<{
  "method" : "GET",
  "path" : "/metadata/10.5072/EDU/TESTID"
}> but was:<[ {
  "method" : "GET",
  "path" : "/metadata/10.5072/EDU/TESTID",
  "headers" : {
    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
    "content-length" : [ "0" ],
    "Accept" : [ "application/xml" ],
    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
    "Host" : [ "localhost:1081" ],
    "Accept-Encoding" : [ "gzip" ],
    "Date" : [ "Fri, 19 Oct 2018 20:22:17 GMT" ]
  },
  "keepAlive" : true,
  "secure" : false
}, {
  "method" : "GET",
  "path" : "/metadata/10.5072/EDU/TESTID",
  "headers" : {
    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
    "content-length" : [ "0" ],
    "Accept" : [ "application/xml" ],
    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
    "Host" : [ "localhost:1081" ],
    "Accept-Encoding" : [ "gzip" ],
    "Date" : [ "Fri, 19 Oct 2018 20:22:17 GMT" ]
  },
  "keepAlive" : true,
  "secure" : false
} ]>
	at org.mockserver.client.AbstractClient.verify(AbstractClient.java:277)
	at fr.cnes.doi.MockupServer.verifySpec(MockupServer.java:67)
	at fr.cnes.doi.MdsSpec.verifySpec(MdsSpec.java:159)
	at fr.cnes.doi.client.ClientMDSTest.testSpectGetMetadata(ClientMDSTest.java:225)
	at fr.cnes.doi.client.ClientMDSTest.testGetMetadata401(ClientMDSTest.java:388)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)
	at org.mockserver.junit.MockServerRule$1.evaluate(MockServerRule.java:110)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)

testCreateMetadata401(fr.cnes.doi.client.ClientMDSTest)  Time elapsed: 1.045 sec  <<< FAILURE!
java.lang.AssertionError: Test the status code expected:<401> but was:<1001>
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:645)
	at fr.cnes.doi.client.ClientMDSTest.testSpecCreateMetadata(ClientMDSTest.java:442)
	at fr.cnes.doi.client.ClientMDSTest.testCreateMetadata401(ClientMDSTest.java:502)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)
	at org.mockserver.junit.MockServerRule$1.evaluate(MockServerRule.java:110)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)

testCreateDoi401(fr.cnes.doi.client.ClientMDSTest)  Time elapsed: 0.553 sec  <<< FAILURE!
java.lang.AssertionError: Test the status code expected:<401> but was:<1001>
	at org.junit.Assert.fail(Assert.java:88)
	at org.junit.Assert.failNotEquals(Assert.java:834)
	at org.junit.Assert.assertEquals(Assert.java:645)
	at fr.cnes.doi.client.ClientMDSTest.testSpecCreateDoi(ClientMDSTest.java:176)
	at fr.cnes.doi.client.ClientMDSTest.testCreateDoi401(ClientMDSTest.java:340)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.rules.ExpectedException$ExpectedExceptionStatement.evaluate(ExpectedException.java:239)
	at org.mockserver.junit.MockServerRule$1.evaluate(MockServerRule.java:110)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
	at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
	at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)

Running fr.cnes.doi.client.ClientCrossCiteCitationTest
------ TEST ClientCrossCiteCitation ------
2018-10-19 22:22:43,015 INFO o.m.m.MockServer MockServer started on port: 43329
2018-10-19 22:22:43,022 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:43,030 INFO o.m.m.MockServer MockServer started on port: 1080
TEST getLanguages
2018-10-19 22:22:43,036 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/locales"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "[\"af-ZA\",\"ar\",\"bg-BG\",\"ca-AD\",\"cs-CZ\",\"cy-GB\",\"da-DK\",\"de-AT\",\"de-CH\",\"de-DE\",\"el-GR\",\"en-GB\",\"en-US\",\"es-CL\",\"es-ES\",\"es-MX\",\"et-EE\",\"eu\",\"fa-IR\",\"fi-FI\",\"fr-CA\",\"fr-FR\",\"he-IL\",\"hr-HR\",\"hu-HU\",\"id-ID\",\"is-IS\",\"it-IT\",\"ja-JP\",\"km-KH\",\"ko-KR\",\"lt-LT\",\"lv-LV\",\"mn-MN\",\"nb-NO\",\"nl-NL\",\"nn-NO\",\"pl-PL\",\"pt-BR\",\"pt-PT\",\"ro-RO\",\"ru-RU\",\"sk-SK\",\"sl-SI\",\"sr-RS\",\"sv-SE\",\"th-TH\",\"tr-TR\",\"uk-UA\",\"vi-VN\",\"zh-CN\",\"zh-TW\"]",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:43,053 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:43 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/locales"
	}

2018-10-19 22:22:43,054 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"af-ZA\",\"ar\",\"bg-BG\",\"ca-AD\",\"cs-CZ\",\"cy-GB\",\"da-DK\",\"de-AT\",\"de-CH\",\"de-DE\",\"el-GR\",\"en-GB\",\"en-US\",\"es-CL\",\"es-ES\",\"es-MX\",\"et-EE\",\"eu\",\"fa-IR\",\"fi-FI\",\"fr-CA\",\"fr-FR\",\"he-IL\",\"hr-HR\",\"hu-HU\",\"id-ID\",\"is-IS\",\"it-IT\",\"ja-JP\",\"km-KH\",\"ko-KR\",\"lt-LT\",\"lv-LV\",\"mn-MN\",\"nb-NO\",\"nl-NL\",\"nn-NO\",\"pl-PL\",\"pt-BR\",\"pt-PT\",\"ro-RO\",\"ru-RU\",\"sk-SK\",\"sl-SI\",\"sr-RS\",\"sv-SE\",\"th-TH\",\"tr-TR\",\"uk-UA\",\"vi-VN\",\"zh-CN\",\"zh-TW\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:43 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"af-ZA\",\"ar\",\"bg-BG\",\"ca-AD\",\"cs-CZ\",\"cy-GB\",\"da-DK\",\"de-AT\",\"de-CH\",\"de-DE\",\"el-GR\",\"en-GB\",\"en-US\",\"es-CL\",\"es-ES\",\"es-MX\",\"et-EE\",\"eu\",\"fa-IR\",\"fi-FI\",\"fr-CA\",\"fr-FR\",\"he-IL\",\"hr-HR\",\"hu-HU\",\"id-ID\",\"is-IS\",\"it-IT\",\"ja-JP\",\"km-KH\",\"ko-KR\",\"lt-LT\",\"lv-LV\",\"mn-MN\",\"nb-NO\",\"nl-NL\",\"nn-NO\",\"pl-PL\",\"pt-BR\",\"pt-PT\",\"ro-RO\",\"ru-RU\",\"sk-SK\",\"sl-SI\",\"sr-RS\",\"sv-SE\",\"th-TH\",\"tr-TR\",\"uk-UA\",\"vi-VN\",\"zh-CN\",\"zh-TW\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:43,062 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/locales"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:43,853 INFO o.m.m.MockServer MockServer started on port: 45641
2018-10-19 22:22:43,862 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:43,870 INFO o.m.m.MockServer MockServer started on port: 1080
TEST getFormat
2018-10-19 22:22:43,876 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "Garza, K., Goble, C., Brooke, J., & Jay, C. 2015. Framing the community data system interface. Proceedings of the 2015 British HCI Conference on - British HCI '15. Presented at the the 2015 British HCI Conference, ACM Press. https://doi.org/10.1145/2783446.2783605.\n",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:43,882 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-review" ],
	    "lang" : [ "af-ZA" ],
	    "doi" : [ "10.1145/2783446.2783605" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:43 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/format"
	}

2018-10-19 22:22:43,883 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "Garza, K., Goble, C., Brooke, J., & Jay, C. 2015. Framing the community data system interface. Proceedings of the 2015 British HCI Conference on - British HCI '15. Presented at the the 2015 British HCI Conference, ACM Press. https://doi.org/10.1145/2783446.2783605.\n",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-review" ],
	    "lang" : [ "af-ZA" ],
	    "doi" : [ "10.1145/2783446.2783605" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:43 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "Garza, K., Goble, C., Brooke, J., & Jay, C. 2015. Framing the community data system interface. Proceedings of the 2015 British HCI Conference on - British HCI '15. Presented at the the 2015 British HCI Conference, ACM Press. https://doi.org/10.1145/2783446.2783605.\n",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:43,887 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:44,687 INFO o.m.m.MockServer MockServer started on port: 36291
2018-10-19 22:22:44,693 INFO o.m.m.HttpStateHandler resetting all expectations and request logs

2018-10-19 22:22:44,701 INFO o.m.m.MockServer MockServer started on port: 1080
TEST getStyles
2018-10-19 22:22:44,710 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/styles"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:44,724 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:44 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/styles"
	}

2018-10-19 22:22:44,724 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:44 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:44,730 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/styles"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.494 sec
Running fr.cnes.doi.resource.citation.FormatCitationResourceTest
[32mINFO  2018-10-19 22:22:45[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:45[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:45[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:45[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:45[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:22:45[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:45[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:22:45[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
------ TEST FormatCitationResource ------
2018-10-19 22:22:45,361 INFO o.m.m.MockServer MockServer started on port: 1080
TEST: GetFormat with a wrong style
2018-10-19 22:22:45,366 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 400
	  }
	}

2018-10-19 22:22:45,449 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-rew" ],
	    "lang" : [ "af-ZA" ],
	    "doi" : [ "10.1145/2783446.2783605" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:45 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/format"
	}

2018-10-19 22:22:45,451 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 400,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-rew" ],
	    "lang" : [ "af-ZA" ],
	    "doi" : [ "10.1145/2783446.2783605" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:45 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 400
	}

[1;31mERROR 2018-10-19 22:22:45[m application.AbstractApplication (AbstractApplication.java:164) - fr.cnes.doi.exception.MailingException: The SMTP server cannot be reached
[1;31mERROR 2018-10-19 22:22:45[m citation.FormatCitationResource (FormatCitationResource.java:113) - Throwing
org.restlet.resource.ResourceException: Wrong input parameters
	at fr.cnes.doi.resource.citation.FormatCitationResource.getFormat(FormatCitationResource.java:113) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:524) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.get(ServerResource.java:743) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:618) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
Caused by: fr.cnes.doi.exception.ClientCrossCiteException: Bad Request
	at fr.cnes.doi.client.ClientCrossCiteCitation.getFormat(ClientCrossCiteCitation.java:278) ~[classes/:?]
	at fr.cnes.doi.resource.citation.FormatCitationResource.getFormat(FormatCitationResource.java:107) ~[classes/:?]
	... 59 more
Caused by: org.restlet.resource.ResourceException: Bad Request
	at org.restlet.resource.ClientResource.doError(ClientResource.java:590) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handleInbound(ClientResource.java:1153) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1048) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1023) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:928) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.get(ClientResource.java:636) ~[org.restlet-3.0-M1.jar:?]
	at fr.cnes.doi.client.ClientCrossCiteCitation.getFormat(ClientCrossCiteCitation.java:267) ~[classes/:?]
	at fr.cnes.doi.resource.citation.FormatCitationResource.getFormat(FormatCitationResource.java:107) ~[classes/:?]
	... 59 more
2018-10-19 22:22:45,529 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:45,805 INFO o.m.m.MockServer MockServer started on port: 1080
TEST: GetFormat through a HTTPS server
2018-10-19 22:22:45,823 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "Garza, K., Goble, C., Brooke, J., & Jay, C. 2015. Framing the community data system interface. Proceedings of the 2015 British HCI Conference on - British HCI '15. Presented at the the 2015 British HCI Conference, ACM Press. https://doi.org/10.1145/2783446.2783605.\n",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:45,848 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-review" ],
	    "lang" : [ "af-ZA" ],
	    "doi" : [ "10.1145/2783446.2783605" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:45 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/format"
	}

2018-10-19 22:22:45,848 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "Garza, K., Goble, C., Brooke, J., & Jay, C. 2015. Framing the community data system interface. Proceedings of the 2015 British HCI Conference on - British HCI '15. Presented at the the 2015 British HCI Conference, ACM Press. https://doi.org/10.1145/2783446.2783605.\n",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-review" ],
	    "lang" : [ "af-ZA" ],
	    "doi" : [ "10.1145/2783446.2783605" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:45 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "Garza, K., Goble, C., Brooke, J., & Jay, C. 2015. Framing the community data system interface. Proceedings of the 2015 British HCI Conference on - British HCI '15. Presented at the the 2015 British HCI Conference, ACM Press. https://doi.org/10.1145/2783446.2783605.\n",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:45,863 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:46,136 INFO o.m.m.MockServer MockServer started on port: 1080
TEST: GetFormat with a wrong DOI and language
2018-10-19 22:22:46,152 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 404
	  }
	}

2018-10-19 22:22:46,174 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-review" ],
	    "lang" : [ "af-Z" ],
	    "doi" : [ "10.1145/276.27" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:46 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/format"
	}

2018-10-19 22:22:46,175 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 404,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-review" ],
	    "lang" : [ "af-Z" ],
	    "doi" : [ "10.1145/276.27" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:46 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 404
	}

[1;31mERROR 2018-10-19 22:22:46[m application.AbstractApplication (AbstractApplication.java:164) - fr.cnes.doi.exception.MailingException: The SMTP server cannot be reached
[1;31mERROR 2018-10-19 22:22:46[m citation.FormatCitationResource (FormatCitationResource.java:113) - Throwing
org.restlet.resource.ResourceException: DOI not found
	at fr.cnes.doi.resource.citation.FormatCitationResource.getFormat(FormatCitationResource.java:113) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:524) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.get(ServerResource.java:743) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:618) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
Caused by: fr.cnes.doi.exception.ClientCrossCiteException: Not Found
	at fr.cnes.doi.client.ClientCrossCiteCitation.getFormat(ClientCrossCiteCitation.java:278) ~[classes/:?]
	at fr.cnes.doi.resource.citation.FormatCitationResource.getFormat(FormatCitationResource.java:107) ~[classes/:?]
	... 59 more
Caused by: org.restlet.resource.ResourceException: Not Found
	at org.restlet.resource.ClientResource.doError(ClientResource.java:590) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handleInbound(ClientResource.java:1153) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1048) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1023) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:928) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.get(ClientResource.java:636) ~[org.restlet-3.0-M1.jar:?]
	at fr.cnes.doi.client.ClientCrossCiteCitation.getFormat(ClientCrossCiteCitation.java:267) ~[classes/:?]
	at fr.cnes.doi.resource.citation.FormatCitationResource.getFormat(FormatCitationResource.java:107) ~[classes/:?]
	... 59 more
2018-10-19 22:22:46,202 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:46,474 INFO o.m.m.MockServer MockServer started on port: 1080
TEST: GetFormat through a HTTPS server with wrong parameters
2018-10-19 22:22:46,490 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 400
	  }
	}

[1;31mERROR 2018-10-19 22:22:46[m citation.FormatCitationResource (FormatCitationResource.java:138) - Throwing
org.restlet.resource.ResourceException: Bad Request
	at fr.cnes.doi.resource.citation.FormatCitationResource.checkInputs(FormatCitationResource.java:139) [classes/:?]
	at fr.cnes.doi.resource.citation.FormatCitationResource.getFormat(FormatCitationResource.java:106) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:524) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.get(ServerResource.java:743) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:618) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
2018-10-19 22:22:46,800 INFO o.m.m.MockServer MockServer started on port: 1080
TEST: GetFormat with a wrong language
2018-10-19 22:22:46,830 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 400
	  }
	}

2018-10-19 22:22:46,861 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-review" ],
	    "lang" : [ "af-Z" ],
	    "doi" : [ "10.1145/2783446.2783605" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:46 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/format"
	}

2018-10-19 22:22:46,862 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 400,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-review" ],
	    "lang" : [ "af-Z" ],
	    "doi" : [ "10.1145/2783446.2783605" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:46 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 400
	}

[1;31mERROR 2018-10-19 22:22:46[m application.AbstractApplication (AbstractApplication.java:164) - fr.cnes.doi.exception.MailingException: The SMTP server cannot be reached
[1;31mERROR 2018-10-19 22:22:46[m citation.FormatCitationResource (FormatCitationResource.java:113) - Throwing
org.restlet.resource.ResourceException: Wrong input parameters
	at fr.cnes.doi.resource.citation.FormatCitationResource.getFormat(FormatCitationResource.java:113) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:524) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.get(ServerResource.java:743) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:618) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
Caused by: fr.cnes.doi.exception.ClientCrossCiteException: Bad Request
	at fr.cnes.doi.client.ClientCrossCiteCitation.getFormat(ClientCrossCiteCitation.java:278) ~[classes/:?]
	at fr.cnes.doi.resource.citation.FormatCitationResource.getFormat(FormatCitationResource.java:107) ~[classes/:?]
	... 59 more
Caused by: org.restlet.resource.ResourceException: Bad Request
	at org.restlet.resource.ClientResource.doError(ClientResource.java:590) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handleInbound(ClientResource.java:1153) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1048) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1023) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:928) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.get(ClientResource.java:636) ~[org.restlet-3.0-M1.jar:?]
	at fr.cnes.doi.client.ClientCrossCiteCitation.getFormat(ClientCrossCiteCitation.java:267) ~[classes/:?]
	at fr.cnes.doi.resource.citation.FormatCitationResource.getFormat(FormatCitationResource.java:107) ~[classes/:?]
	... 59 more
2018-10-19 22:22:46,872 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:47,147 INFO o.m.m.MockServer MockServer started on port: 1080
TEST GetFormat through a HTTP server
2018-10-19 22:22:47,167 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "Garza, K., Goble, C., Brooke, J., & Jay, C. 2015. Framing the community data system interface. Proceedings of the 2015 British HCI Conference on - British HCI '15. Presented at the the 2015 British HCI Conference, ACM Press. https://doi.org/10.1145/2783446.2783605.\n",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:47,188 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-review" ],
	    "lang" : [ "af-ZA" ],
	    "doi" : [ "10.1145/2783446.2783605" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:47 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/format"
	}

2018-10-19 22:22:47,190 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "Garza, K., Goble, C., Brooke, J., & Jay, C. 2015. Framing the community data system interface. Proceedings of the 2015 British HCI Conference on - British HCI '15. Presented at the the 2015 British HCI Conference, ACM Press. https://doi.org/10.1145/2783446.2783605.\n",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-review" ],
	    "lang" : [ "af-ZA" ],
	    "doi" : [ "10.1145/2783446.2783605" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:47 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "Garza, K., Goble, C., Brooke, J., & Jay, C. 2015. Framing the community data system interface. Proceedings of the 2015 British HCI Conference on - British HCI '15. Presented at the the 2015 British HCI Conference, ACM Press. https://doi.org/10.1145/2783446.2783605.\n",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:47,206 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:47,492 INFO o.m.m.MockServer MockServer started on port: 1080
TEST: GetFormat with a wrong DOI
2018-10-19 22:22:47,503 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 404
	  }
	}

2018-10-19 22:22:47,510 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-review" ],
	    "lang" : [ "af-ZA" ],
	    "doi" : [ "xxxx" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:47 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/format"
	}

2018-10-19 22:22:47,510 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 404,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "queryStringParameters" : {
	    "style" : [ "academy-of-management-review" ],
	    "lang" : [ "af-ZA" ],
	    "doi" : [ "xxxx" ]
	  },
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:47 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 404
	}

[1;31mERROR 2018-10-19 22:22:47[m application.AbstractApplication (AbstractApplication.java:164) - fr.cnes.doi.exception.MailingException: The SMTP server cannot be reached
[1;31mERROR 2018-10-19 22:22:47[m citation.FormatCitationResource (FormatCitationResource.java:113) - Throwing
org.restlet.resource.ResourceException: DOI not found
	at fr.cnes.doi.resource.citation.FormatCitationResource.getFormat(FormatCitationResource.java:113) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:524) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.get(ServerResource.java:743) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:618) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
Caused by: fr.cnes.doi.exception.ClientCrossCiteException: Not Found
	at fr.cnes.doi.client.ClientCrossCiteCitation.getFormat(ClientCrossCiteCitation.java:278) ~[classes/:?]
	at fr.cnes.doi.resource.citation.FormatCitationResource.getFormat(FormatCitationResource.java:107) ~[classes/:?]
	... 59 more
Caused by: org.restlet.resource.ResourceException: Not Found
	at org.restlet.resource.ClientResource.doError(ClientResource.java:590) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handleInbound(ClientResource.java:1153) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1048) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1023) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:928) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.get(ClientResource.java:636) ~[org.restlet-3.0-M1.jar:?]
	at fr.cnes.doi.client.ClientCrossCiteCitation.getFormat(ClientCrossCiteCitation.java:267) ~[classes/:?]
	at fr.cnes.doi.resource.citation.FormatCitationResource.getFormat(FormatCitationResource.java:107) ~[classes/:?]
	... 59 more
2018-10-19 22:22:47,521 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/format"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.546 sec
Running fr.cnes.doi.resource.citation.StyleCitationResourceTest
[32mINFO  2018-10-19 22:22:47[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:47[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:47[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:47[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:47[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:22:47[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:47[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:22:47[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
------ TEST StyleCitationResource ------
2018-10-19 22:22:47,871 INFO o.m.m.MockServer MockServer started on port: 1080
TEST: GetStyles through a HTTPS server
2018-10-19 22:22:47,875 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/styles"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:47,903 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:47 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/styles"
	}

2018-10-19 22:22:47,904 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:47 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:47,921 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/styles"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:48,191 INFO o.m.m.MockServer MockServer started on port: 1080
TEST: GetStyles as a JSON response
2018-10-19 22:22:48,198 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/styles"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:48,213 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:48 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/styles"
	}

2018-10-19 22:22:48,213 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:48 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:48,221 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/styles"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:48,510 INFO o.m.m.MockServer MockServer started on port: 1080
TEST: GetStyles through a HTTP server
2018-10-19 22:22:48,529 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/styles"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:48,553 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:48 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/styles"
	}

2018-10-19 22:22:48,554 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:48 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:48,567 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/styles"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:48,838 INFO o.m.m.MockServer MockServer started on port: 1080
TEST: GetStyles as a XML response
2018-10-19 22:22:48,852 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/styles"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:48,865 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:48 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/styles"
	}

2018-10-19 22:22:48,865 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:48 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"academy-of-management-review\",\"accident-analysis-and-prevention\",\"acm-sig-proceedings-long-author-list\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:48,911 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/styles"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.387 sec
Running fr.cnes.doi.resource.citation.LanguageCitationResourceTest
[32mINFO  2018-10-19 22:22:49[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:49[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:49[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:49[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:49[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:22:49[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:49[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:22:49[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
------ TEST LanguageCitationResource ------
2018-10-19 22:22:49,268 INFO o.m.m.MockServer MockServer started on port: 1080
TEST: GetLanguages through a HTTPS server
2018-10-19 22:22:49,273 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/locales"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "[\"af-ZA\",\"ar\",\"bg-BG\",\"ca-AD\",\"cs-CZ\",\"cy-GB\",\"da-DK\",\"de-AT\",\"de-CH\",\"de-DE\",\"el-GR\",\"en-GB\",\"en-US\",\"es-CL\",\"es-ES\",\"es-MX\",\"et-EE\",\"eu\",\"fa-IR\",\"fi-FI\",\"fr-CA\",\"fr-FR\",\"he-IL\",\"hr-HR\",\"hu-HU\",\"id-ID\",\"is-IS\",\"it-IT\",\"ja-JP\",\"km-KH\",\"ko-KR\",\"lt-LT\",\"lv-LV\",\"mn-MN\",\"nb-NO\",\"nl-NL\",\"nn-NO\",\"pl-PL\",\"pt-BR\",\"pt-PT\",\"ro-RO\",\"ru-RU\",\"sk-SK\",\"sl-SI\",\"sr-RS\",\"sv-SE\",\"th-TH\",\"tr-TR\",\"uk-UA\",\"vi-VN\",\"zh-CN\",\"zh-TW\"]",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:49,299 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:49 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/locales"
	}

2018-10-19 22:22:49,299 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"af-ZA\",\"ar\",\"bg-BG\",\"ca-AD\",\"cs-CZ\",\"cy-GB\",\"da-DK\",\"de-AT\",\"de-CH\",\"de-DE\",\"el-GR\",\"en-GB\",\"en-US\",\"es-CL\",\"es-ES\",\"es-MX\",\"et-EE\",\"eu\",\"fa-IR\",\"fi-FI\",\"fr-CA\",\"fr-FR\",\"he-IL\",\"hr-HR\",\"hu-HU\",\"id-ID\",\"is-IS\",\"it-IT\",\"ja-JP\",\"km-KH\",\"ko-KR\",\"lt-LT\",\"lv-LV\",\"mn-MN\",\"nb-NO\",\"nl-NL\",\"nn-NO\",\"pl-PL\",\"pt-BR\",\"pt-PT\",\"ro-RO\",\"ru-RU\",\"sk-SK\",\"sl-SI\",\"sr-RS\",\"sv-SE\",\"th-TH\",\"tr-TR\",\"uk-UA\",\"vi-VN\",\"zh-CN\",\"zh-TW\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:49 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"af-ZA\",\"ar\",\"bg-BG\",\"ca-AD\",\"cs-CZ\",\"cy-GB\",\"da-DK\",\"de-AT\",\"de-CH\",\"de-DE\",\"el-GR\",\"en-GB\",\"en-US\",\"es-CL\",\"es-ES\",\"es-MX\",\"et-EE\",\"eu\",\"fa-IR\",\"fi-FI\",\"fr-CA\",\"fr-FR\",\"he-IL\",\"hr-HR\",\"hu-HU\",\"id-ID\",\"is-IS\",\"it-IT\",\"ja-JP\",\"km-KH\",\"ko-KR\",\"lt-LT\",\"lv-LV\",\"mn-MN\",\"nb-NO\",\"nl-NL\",\"nn-NO\",\"pl-PL\",\"pt-BR\",\"pt-PT\",\"ro-RO\",\"ru-RU\",\"sk-SK\",\"sl-SI\",\"sr-RS\",\"sv-SE\",\"th-TH\",\"tr-TR\",\"uk-UA\",\"vi-VN\",\"zh-CN\",\"zh-TW\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:49,306 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/locales"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:49,578 INFO o.m.m.MockServer MockServer started on port: 1080
TEST: GetLanguages through a HTTP Server
2018-10-19 22:22:49,596 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/locales"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "[\"af-ZA\",\"ar\",\"bg-BG\",\"ca-AD\",\"cs-CZ\",\"cy-GB\",\"da-DK\",\"de-AT\",\"de-CH\",\"de-DE\",\"el-GR\",\"en-GB\",\"en-US\",\"es-CL\",\"es-ES\",\"es-MX\",\"et-EE\",\"eu\",\"fa-IR\",\"fi-FI\",\"fr-CA\",\"fr-FR\",\"he-IL\",\"hr-HR\",\"hu-HU\",\"id-ID\",\"is-IS\",\"it-IT\",\"ja-JP\",\"km-KH\",\"ko-KR\",\"lt-LT\",\"lv-LV\",\"mn-MN\",\"nb-NO\",\"nl-NL\",\"nn-NO\",\"pl-PL\",\"pt-BR\",\"pt-PT\",\"ro-RO\",\"ru-RU\",\"sk-SK\",\"sl-SI\",\"sr-RS\",\"sv-SE\",\"th-TH\",\"tr-TR\",\"uk-UA\",\"vi-VN\",\"zh-CN\",\"zh-TW\"]",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:49,615 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:49 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/locales"
	}

2018-10-19 22:22:49,616 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"af-ZA\",\"ar\",\"bg-BG\",\"ca-AD\",\"cs-CZ\",\"cy-GB\",\"da-DK\",\"de-AT\",\"de-CH\",\"de-DE\",\"el-GR\",\"en-GB\",\"en-US\",\"es-CL\",\"es-ES\",\"es-MX\",\"et-EE\",\"eu\",\"fa-IR\",\"fi-FI\",\"fr-CA\",\"fr-FR\",\"he-IL\",\"hr-HR\",\"hu-HU\",\"id-ID\",\"is-IS\",\"it-IT\",\"ja-JP\",\"km-KH\",\"ko-KR\",\"lt-LT\",\"lv-LV\",\"mn-MN\",\"nb-NO\",\"nl-NL\",\"nn-NO\",\"pl-PL\",\"pt-BR\",\"pt-PT\",\"ro-RO\",\"ru-RU\",\"sk-SK\",\"sl-SI\",\"sr-RS\",\"sv-SE\",\"th-TH\",\"tr-TR\",\"uk-UA\",\"vi-VN\",\"zh-CN\",\"zh-TW\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "headers" : {
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1080" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:49 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "[\"af-ZA\",\"ar\",\"bg-BG\",\"ca-AD\",\"cs-CZ\",\"cy-GB\",\"da-DK\",\"de-AT\",\"de-CH\",\"de-DE\",\"el-GR\",\"en-GB\",\"en-US\",\"es-CL\",\"es-ES\",\"es-MX\",\"et-EE\",\"eu\",\"fa-IR\",\"fi-FI\",\"fr-CA\",\"fr-FR\",\"he-IL\",\"hr-HR\",\"hu-HU\",\"id-ID\",\"is-IS\",\"it-IT\",\"ja-JP\",\"km-KH\",\"ko-KR\",\"lt-LT\",\"lv-LV\",\"mn-MN\",\"nb-NO\",\"nl-NL\",\"nn-NO\",\"pl-PL\",\"pt-BR\",\"pt-PT\",\"ro-RO\",\"ru-RU\",\"sk-SK\",\"sl-SI\",\"sr-RS\",\"sv-SE\",\"th-TH\",\"tr-TR\",\"uk-UA\",\"vi-VN\",\"zh-CN\",\"zh-TW\"]",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:49,633 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/locales"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.709 sec
Running fr.cnes.doi.resource.admin.SuffixProjectsResourceTest
[32mINFO  2018-10-19 22:22:49[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:49[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:49[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:49[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:49[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:22:49[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:49[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:22:49[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
------ TEST SuffixProjectsResource ------
TEST: createProject
TEST: getProjectsNameAsJson throw a HTTPS server
TEST: createProject with wrong parameters
[1;31mERROR 2018-10-19 22:22:50[m admin.SuffixProjectsResource (SuffixProjectsResource.java:118) - Throwing
org.restlet.resource.ResourceException: Bad Request
	at fr.cnes.doi.resource.admin.SuffixProjectsResource.checkInputs(SuffixProjectsResource.java:118) [classes/:?]
	at fr.cnes.doi.resource.admin.SuffixProjectsResource.createProject(SuffixProjectsResource.java:103) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:521) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.post(ServerResource.java:1376) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:621) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
TEST: getProjectsNameAsXml through a HTTPS server
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.114 sec
Running fr.cnes.doi.resource.admin.ServicesTest
[32mINFO  2018-10-19 22:22:50[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:50[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:50[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:50[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:50[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:22:50[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:50[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:22:50[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
------ TEST Services ------
TEST: getStatus service through a HTTPS server
2018-10-19 22:22:51,555 WARN o.e.j.s.Response Committed before 500 An exception occured writing the response entity
Tests run: 2, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 1.527 sec
Running fr.cnes.doi.resource.admin.TokenResourceTest
[32mINFO  2018-10-19 22:22:51[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:51[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:51[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:51[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:51[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:22:51[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:51[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:22:51[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
------ TEST TokenResource ------
TEST: CreateToken
TEST: CreateToken
[32mINFO  2018-10-19 22:22:51[m admin.TokenResource (TokenResource.java:142) - Token created eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJET0kiLCJpYXQiOjE1Mzk5ODA1NzEsInN1YiI6ImpjbSIsInByb2plY3RJRCI6ODI4NjA2LCJwcm9qZWN0TmFtZSI6IkNGT1NBVCIsImV4cCI6MTU3MTUxNjU3MX0.y-2dCrvF0JaPg_6gGVQ49VhmWRKOE-DuYW8NXwud3bQ for project 828606 during 1 YEAR
TEST: CreateToken with wrong parameters
[1;31mERROR 2018-10-19 22:22:51[m admin.TokenResource (TokenResource.java:172) - Throwing
org.restlet.resource.ResourceException: Bad Request
	at fr.cnes.doi.resource.admin.TokenResource.checkInputs(TokenResource.java:173) [classes/:?]
	at fr.cnes.doi.resource.admin.TokenResource.createToken(TokenResource.java:125) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:521) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.post(ServerResource.java:1376) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:621) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
TEST: GetTokenInformation with wrong credentials
[32mINFO  2018-10-19 22:22:51[m admin.TokenResource (TokenResource.java:142) - Token created eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJET0kiLCJpYXQiOjE1Mzk5ODA1NzEsInN1YiI6ImpjbSIsInByb2plY3RJRCI6ODI4NjA2LCJwcm9qZWN0TmFtZSI6IkNGT1NBVCIsImV4cCI6MTU3MTUxNjU3MX0.y-2dCrvF0JaPg_6gGVQ49VhmWRKOE-DuYW8NXwud3bQ for project 828606 during 1 YEAR
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.144 sec
Running fr.cnes.doi.resource.mds.MediaResourceTest
[32mINFO  2018-10-19 22:22:51[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:51[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:51[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:51[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:51[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:22:51[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:51[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:22:51[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
------ TEST MediaResource ------
2018-10-19 22:22:51,733 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: GetMedias with wrong DOI through a HTTPS server
2018-10-19 22:22:51,739 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 404,
	    "body" : {
	      "type" : "STRING",
	      "string" : "No media attached to the DOI or DOI does not exist in our database",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:51,783 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:51 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:51,783 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 404,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "No media attached to the DOI or DOI does not exist in our database",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:51 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 404,
	  "body" : {
	    "type" : "STRING",
	    "string" : "No media attached to the DOI or DOI does not exist in our database",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

[1;31mERROR 2018-10-19 22:22:51[m mds.MediaResource (MediaResource.java:93) - Throwing
org.restlet.resource.ResourceException: Not Found
	at fr.cnes.doi.resource.mds.MediaResource.getMedias(MediaResource.java:93) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:524) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.get(ServerResource.java:743) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:618) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
Caused by: fr.cnes.doi.exception.ClientMdsException: Not Found
	at fr.cnes.doi.client.ClientMDS.getMedia(ClientMDS.java:834) ~[classes/:?]
	at fr.cnes.doi.resource.mds.MediaResource.getMedias(MediaResource.java:89) ~[classes/:?]
	... 65 more
Caused by: org.restlet.resource.ResourceException: Not Found
	at org.restlet.resource.ClientResource.doError(ClientResource.java:590) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handleInbound(ClientResource.java:1153) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1048) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1023) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:928) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.get(ClientResource.java:636) ~[org.restlet-3.0-M1.jar:?]
	at fr.cnes.doi.client.ClientMDS.getMedia(ClientMDS.java:830) ~[classes/:?]
	at fr.cnes.doi.resource.mds.MediaResource.getMedias(MediaResource.java:89) ~[classes/:?]
	... 65 more
2018-10-19 22:22:51,791 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:52,074 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: GetMedias
2018-10-19 22:22:52,092 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "application/fits=http://cnes.fr/test-data",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:52,114 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:52 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:52,115 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:52 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:52,124 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:52,409 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: GetMedias with wrong DOI through HTTP server
2018-10-19 22:22:52,426 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 404,
	    "body" : {
	      "type" : "STRING",
	      "string" : "No media attached to the DOI or DOI does not exist in our database",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:52,439 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:52 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:52,440 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 404,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "No media attached to the DOI or DOI does not exist in our database",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:52 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 404,
	  "body" : {
	    "type" : "STRING",
	    "string" : "No media attached to the DOI or DOI does not exist in our database",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

[1;31mERROR 2018-10-19 22:22:52[m mds.MediaResource (MediaResource.java:93) - Throwing
org.restlet.resource.ResourceException: Not Found
	at fr.cnes.doi.resource.mds.MediaResource.getMedias(MediaResource.java:93) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:524) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.get(ServerResource.java:743) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:618) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
Caused by: fr.cnes.doi.exception.ClientMdsException: Not Found
	at fr.cnes.doi.client.ClientMDS.getMedia(ClientMDS.java:834) ~[classes/:?]
	at fr.cnes.doi.resource.mds.MediaResource.getMedias(MediaResource.java:89) ~[classes/:?]
	... 65 more
Caused by: org.restlet.resource.ResourceException: Not Found
	at org.restlet.resource.ClientResource.doError(ClientResource.java:590) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handleInbound(ClientResource.java:1153) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1048) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1023) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:928) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.get(ClientResource.java:636) ~[org.restlet-3.0-M1.jar:?]
	at fr.cnes.doi.client.ClientMDS.getMedia(ClientMDS.java:830) ~[classes/:?]
	at fr.cnes.doi.resource.mds.MediaResource.getMedias(MediaResource.java:89) ~[classes/:?]
	... 65 more
2018-10-19 22:22:52,447 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:52,725 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: GetMedias
2018-10-19 22:22:52,731 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "application/fits=http://cnes.fr/test-data",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:52,737 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:52 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID"
	}

2018-10-19 22:22:52,738 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/media/10.5072/EDU/TESTID",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:52 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "application/fits=http://cnes.fr/test-data",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:52,745 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/media/10.5072/EDU/TESTID"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:53,022 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: CreateMedia
[1;31mERROR 2018-10-19 22:22:53[m mds.BaseMdsResource (BaseMdsResource.java:186) - Throwing
org.restlet.resource.ResourceException: Forbidden
	at fr.cnes.doi.resource.mds.BaseMdsResource.checkPermission(BaseMdsResource.java:186) [classes/:?]
	at fr.cnes.doi.resource.mds.MediaResource.createMedia(MediaResource.java:139) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:521) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.post(ServerResource.java:1376) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:621) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.604 sec
Running fr.cnes.doi.resource.mds.MetadatasResourceTest
[32mINFO  2018-10-19 22:22:53[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:53[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:53[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:53[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:53[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:22:53[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:53[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:22:53[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
------ TEST MetadatasResource ------
2018-10-19 22:22:53,366 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: createMetadata
2018-10-19 22:22:53,371 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 201,
	    "body" : "CREATED"
	  }
	}

2018-10-19 22:22:54,366 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier><creators><creator><creatorName>CNES</creatorName></creator><creator><creatorName>LATMOS</creatorName></creator></creators><titles><title>J1_105min_Pacific_Nominal_MacroCycle</title></titles><publisher>CNES</publisher><publicationYear>2017</publicationYear><resourceType resourceTypeGeneral=\"Dataset\"></resourceType><subjects><subject>\n            CFOSAT simulated data.\n        </subject></subjects><contributors><contributor contributorType=\"Producer\"><contributorName>CNES</contributorName></contributor><contributor contributorType=\"Producer\"><contributorName>LATMOS</contributorName></contributor><contributor contributorType=\"RightsHolder\"><contributorName>CNES</contributorName></contributor><contributor contributorType=\"ResearchGroup\"><contributorName>METEO-FRANCE</contributorName></contributor><contributor contributorType=\"ResearchGroup\"><contributorName>IFREMER</contributorName></contributor></contributors><dates><date dateType=\"Created\">2017-06-01</date></dates><language>en</language><alternateIdentifiers><alternateIdentifier alternateIdentifierType=\"SEF identifier\">J1_105min_Pacific_Nominal_MacroCycle</alternateIdentifier></alternateIdentifiers><relatedIdentifiers><relatedIdentifier relatedIdentifierType=\"URL\" relationType=\"IsDocumentedBy\">https://cfosat-sef.cnes.fr/cnes_to_cfosat/documents/Product_Format_Description.pdf</relatedIdentifier><relatedIdentifier relatedIdentifierType=\"URL\" relationType=\"IsDocumentedBy\">https://cfosat-sef.cnes.fr/cnes_to_cfosat/documents/Product_Users_Guide.pdf</relatedIdentifier><relatedIdentifier relatedIdentifierType=\"URL\" relationType=\"IsDocumentedBy\">https://cfosat-sef.cnes.fr/cnes_to_cfosat/documents/SWIM_Instrument_Manual.pdf</relatedIdentifier></relatedIdentifiers><sizes><size>1.5 GB</size></sizes><formats><format>application/x-netcdf</format></formats><version>0.1</version><geoLocations><geoLocation><geoLocationPlace>Pacific</geoLocationPlace></geoLocation></geoLocations></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "2323" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:54 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/metadata"
	}

2018-10-19 22:22:54,367 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 201,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : "CREATED"
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/metadata",
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><resource xmlns=\"http://datacite.org/schema/kernel-4\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4/metadata.xsd\"><identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier><creators><creator><creatorName>CNES</creatorName></creator><creator><creatorName>LATMOS</creatorName></creator></creators><titles><title>J1_105min_Pacific_Nominal_MacroCycle</title></titles><publisher>CNES</publisher><publicationYear>2017</publicationYear><resourceType resourceTypeGeneral=\"Dataset\"></resourceType><subjects><subject>\n            CFOSAT simulated data.\n        </subject></subjects><contributors><contributor contributorType=\"Producer\"><contributorName>CNES</contributorName></contributor><contributor contributorType=\"Producer\"><contributorName>LATMOS</contributorName></contributor><contributor contributorType=\"RightsHolder\"><contributorName>CNES</contributorName></contributor><contributor contributorType=\"ResearchGroup\"><contributorName>METEO-FRANCE</contributorName></contributor><contributor contributorType=\"ResearchGroup\"><contributorName>IFREMER</contributorName></contributor></contributors><dates><date dateType=\"Created\">2017-06-01</date></dates><language>en</language><alternateIdentifiers><alternateIdentifier alternateIdentifierType=\"SEF identifier\">J1_105min_Pacific_Nominal_MacroCycle</alternateIdentifier></alternateIdentifiers><relatedIdentifiers><relatedIdentifier relatedIdentifierType=\"URL\" relationType=\"IsDocumentedBy\">https://cfosat-sef.cnes.fr/cnes_to_cfosat/documents/Product_Format_Description.pdf</relatedIdentifier><relatedIdentifier relatedIdentifierType=\"URL\" relationType=\"IsDocumentedBy\">https://cfosat-sef.cnes.fr/cnes_to_cfosat/documents/Product_Users_Guide.pdf</relatedIdentifier><relatedIdentifier relatedIdentifierType=\"URL\" relationType=\"IsDocumentedBy\">https://cfosat-sef.cnes.fr/cnes_to_cfosat/documents/SWIM_Instrument_Manual.pdf</relatedIdentifier></relatedIdentifiers><sizes><size>1.5 GB</size></sizes><formats><format>application/x-netcdf</format></formats><version>0.1</version><geoLocations><geoLocation><geoLocationPlace>Pacific</geoLocationPlace></geoLocation></geoLocations></resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "2323" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:54 GMT" ],
	    "Content-Language" : [ "*" ],
	    "Content-Type" : [ "application/xml; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 201,
	  "body" : "CREATED"
	}

2018-10-19 22:22:54,381 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/metadata"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:54,653 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: createMetadata with Wrong File
[32mINFO  2018-10-19 22:22:55[m mds.MetadatasResource$MyValidationEventHandler (MetadatasResource.java:307) - 
EVENTSEVERITY:  2
MESSAGE:  cvc-complex-type.2.4.a: Invalid content was found starting with element 'creatorsError'. One of '{"http://datacite.org/schema/kernel-4":creators, "http://datacite.org/schema/kernel-4":titles, "http://datacite.org/schema/kernel-4":publisher, "http://datacite.org/schema/kernel-4":publicationYear, "http://datacite.org/schema/kernel-4":resourceType, "http://datacite.org/schema/kernel-4":subjects, "http://datacite.org/schema/kernel-4":contributors, "http://datacite.org/schema/kernel-4":dates, "http://datacite.org/schema/kernel-4":language, "http://datacite.org/schema/kernel-4":alternateIdentifiers, "http://datacite.org/schema/kernel-4":relatedIdentifiers, "http://datacite.org/schema/kernel-4":sizes, "http://datacite.org/schema/kernel-4":formats, "http://datacite.org/schema/kernel-4":version, "http://datacite.org/schema/kernel-4":rightsList, "http://datacite.org/schema/kernel-4":descriptions, "http://datacite.org/schema/kernel-4":geoLocations, "http://datacite.org/schema/kernel-4":fundingReferences}' is expected.
LINKED EXCEPTION:  org.xml.sax.SAXParseException; lineNumber: 6; columnNumber: 20; cvc-complex-type.2.4.a: Invalid content was found starting with element 'creatorsError'. One of '{"http://datacite.org/schema/kernel-4":creators, "http://datacite.org/schema/kernel-4":titles, "http://datacite.org/schema/kernel-4":publisher, "http://datacite.org/schema/kernel-4":publicationYear, "http://datacite.org/schema/kernel-4":resourceType, "http://datacite.org/schema/kernel-4":subjects, "http://datacite.org/schema/kernel-4":contributors, "http://datacite.org/schema/kernel-4":dates, "http://datacite.org/schema/kernel-4":language, "http://datacite.org/schema/kernel-4":alternateIdentifiers, "http://datacite.org/schema/kernel-4":relatedIdentifiers, "http://datacite.org/schema/kernel-4":sizes, "http://datacite.org/schema/kernel-4":formats, "http://datacite.org/schema/kernel-4":version, "http://datacite.org/schema/kernel-4":rightsList, "http://datacite.org/schema/kernel-4":descriptions, "http://datacite.org/schema/kernel-4":geoLocations, "http://datacite.org/schema/kernel-4":fundingReferences}' is expected.
LOCATOR
    LINE NUMBER:  6
    COLUMN NUMBER:  20
    OFFSET:  -1
    OBJECT:  null
    NODE:  null
    URL  null

[32mINFO  2018-10-19 22:22:55[m mds.MetadatasResource$MyValidationEventHandler (MetadatasResource.java:307) - 
EVENTSEVERITY:  1
MESSAGE:  unexpected element (uri:"http://datacite.org/schema/kernel-4", local:"creatorsError"). Expected elements are <{http://datacite.org/schema/kernel-4}dates>,<{http://datacite.org/schema/kernel-4}language>,<{http://datacite.org/schema/kernel-4}titles>,<{http://datacite.org/schema/kernel-4}relatedIdentifiers>,<{http://datacite.org/schema/kernel-4}descriptions>,<{http://datacite.org/schema/kernel-4}version>,<{http://datacite.org/schema/kernel-4}geoLocations>,<{http://datacite.org/schema/kernel-4}identifier>,<{http://datacite.org/schema/kernel-4}formats>,<{http://datacite.org/schema/kernel-4}rightsList>,<{http://datacite.org/schema/kernel-4}creators>,<{http://datacite.org/schema/kernel-4}subjects>,<{http://datacite.org/schema/kernel-4}publisher>,<{http://datacite.org/schema/kernel-4}publicationYear>,<{http://datacite.org/schema/kernel-4}contributors>,<{http://datacite.org/schema/kernel-4}fundingReferences>,<{http://datacite.org/schema/kernel-4}resourceType>,<{http://datacite.org/schema/kernel-4}sizes>,<{http://datacite.org/schema/kernel-4}alternateIdentifiers>
LINKED EXCEPTION:  null
LOCATOR
    LINE NUMBER:  6
    COLUMN NUMBER:  20
    OFFSET:  -1
    OBJECT:  null
    NODE:  null
    URL  null

2018-10-19 22:22:55,316 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: CreateMetadata with not role
[1;31mERROR 2018-10-19 22:22:55[m mds.BaseMdsResource (BaseMdsResource.java:140) - Throwing
org.restlet.resource.ResourceException: Unauthorized
	at fr.cnes.doi.resource.mds.BaseMdsResource.getRoleName(BaseMdsResource.java:140) [classes/:?]
	at fr.cnes.doi.resource.mds.BaseMdsResource.checkPermission(BaseMdsResource.java:182) [classes/:?]
	at fr.cnes.doi.resource.mds.MetadatasResource.createMetadata(MetadatasResource.java:108) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:521) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.post(ServerResource.java:1376) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:621) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.69 sec
Running fr.cnes.doi.resource.mds.MetadataResourceTest
[32mINFO  2018-10-19 22:22:56[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:56[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:56[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:56[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:56[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:22:56[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:56[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:22:56[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
------ TEST MetadataResource ------
2018-10-19 22:22:56,066 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: getMetadata as Json
2018-10-19 22:22:56,072 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:56,113 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:56 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	}

2018-10-19 22:22:56,113 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:56 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:56,142 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:56,427 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: GetMetadata
2018-10-19 22:22:56,437 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 404,
	    "body" : "DOI not found"
	  }
	}

2018-10-19 22:22:56,444 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:56 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	}

2018-10-19 22:22:56,444 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 404,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : "DOI not found"
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:56 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 404,
	  "body" : "DOI not found"
	}

[1;31mERROR 2018-10-19 22:22:56[m mds.MetadataResource (MetadataResource.java:101) - Throwing
org.restlet.resource.ResourceException: Not Found
	at fr.cnes.doi.resource.mds.MetadataResource.getMetadata(MetadataResource.java:101) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:524) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.get(ServerResource.java:743) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:618) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
Caused by: fr.cnes.doi.exception.ClientMdsException: Not Found
	at fr.cnes.doi.client.ClientMDS.getMetadata(ClientMDS.java:647) ~[classes/:?]
	at fr.cnes.doi.client.ClientMDS.getMetadataAsObject(ClientMDS.java:618) ~[classes/:?]
	at fr.cnes.doi.resource.mds.MetadataResource.getMetadata(MetadataResource.java:97) ~[classes/:?]
	... 65 more
Caused by: org.restlet.resource.ResourceException: Not Found
	at org.restlet.resource.ClientResource.doError(ClientResource.java:590) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handleInbound(ClientResource.java:1153) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1048) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1065) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:960) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.get(ClientResource.java:678) ~[org.restlet-3.0-M1.jar:?]
	at fr.cnes.doi.client.ClientMDS.getMetadata(ClientMDS.java:645) ~[classes/:?]
	at fr.cnes.doi.client.ClientMDS.getMetadataAsObject(ClientMDS.java:618) ~[classes/:?]
	at fr.cnes.doi.resource.mds.MetadataResource.getMetadata(MetadataResource.java:97) ~[classes/:?]
	... 65 more
2018-10-19 22:22:56,450 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:56,715 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: DeleteMetadata
2018-10-19 22:22:56,720 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:56,727 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:56 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	}

2018-10-19 22:22:56,728 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "DELETE",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:56 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:56,733 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "DELETE",
	    "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:57,000 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: GetMetadata
2018-10-19 22:22:57,007 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:57,014 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:57 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	}

2018-10-19 22:22:57,014 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:57 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:57,122 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:57,404 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: GetMetadata
2018-10-19 22:22:57,421 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 404,
	    "body" : {
	      "type" : "STRING",
	      "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:57,440 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:57 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	}

2018-10-19 22:22:57,441 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 404,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "application/xml" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:57 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 404,
	  "body" : {
	    "type" : "STRING",
	    "string" : "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<resource xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://datacite.org/schema/kernel-4\" xsi:schemaLocation=\"http://datacite.org/schema/kernel-4 http://schema.datacite.org/meta/kernel-4.1/metadata.xsd\">\n    <identifier identifierType=\"DOI\">10.5072/828606/8c3e91ad45ca855b477126bc073ae44b</identifier>\n    <creators>\n        <creator>\n            <creatorName>CNES</creatorName>\n        </creator>\n    </creators>\n    <titles>\n        <title>Le portail Éduthèque</title>\n    </titles>\n    <publisher>CNES</publisher>\n    <publicationYear>2015</publicationYear>\n    <resourceType resourceTypeGeneral=\"Other\">Portail Éduthèque</resourceType>\n</resource>",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

[1;31mERROR 2018-10-19 22:22:57[m mds.MetadataResource (MetadataResource.java:101) - Throwing
org.restlet.resource.ResourceException: Not Found
	at fr.cnes.doi.resource.mds.MetadataResource.getMetadata(MetadataResource.java:101) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:524) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.get(ServerResource.java:743) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:618) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
Caused by: fr.cnes.doi.exception.ClientMdsException: Not Found
	at fr.cnes.doi.client.ClientMDS.getMetadata(ClientMDS.java:647) ~[classes/:?]
	at fr.cnes.doi.client.ClientMDS.getMetadataAsObject(ClientMDS.java:618) ~[classes/:?]
	at fr.cnes.doi.resource.mds.MetadataResource.getMetadata(MetadataResource.java:97) ~[classes/:?]
	... 65 more
Caused by: org.restlet.resource.ResourceException: Not Found
	at org.restlet.resource.ClientResource.doError(ClientResource.java:590) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handleInbound(ClientResource.java:1153) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1048) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1065) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:960) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.get(ClientResource.java:678) ~[org.restlet-3.0-M1.jar:?]
	at fr.cnes.doi.client.ClientMDS.getMetadata(ClientMDS.java:645) ~[classes/:?]
	at fr.cnes.doi.client.ClientMDS.getMetadataAsObject(ClientMDS.java:618) ~[classes/:?]
	at fr.cnes.doi.resource.mds.MetadataResource.getMetadata(MetadataResource.java:97) ~[classes/:?]
	... 65 more
2018-10-19 22:22:57,462 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/metadata/10.5072/828606/8c3e91ad45ca855b477126bc073ae44b"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.743 sec
Running fr.cnes.doi.resource.mds.DoisResourceTest
[32mINFO  2018-10-19 22:22:57[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:57[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:57[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:57[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:57[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:22:57[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:57[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:22:57[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
------ TEST DoisResource ------
2018-10-19 22:22:57,790 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: GetDois though a HTTP server
2018-10-19 22:22:57,797 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "10.5072/EDU/TESTID",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:57,817 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/doi",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:57 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/doi"
	}

2018-10-19 22:22:57,818 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "10.5072/EDU/TESTID",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/doi",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:57 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "10.5072/EDU/TESTID",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:57,823 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:58,103 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: GetDois though a HTTPS server
2018-10-19 22:22:58,122 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "10.5072/EDU/TESTID",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:58,174 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/doi",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:58 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/doi"
	}

2018-10-19 22:22:58,175 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "10.5072/EDU/TESTID",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/doi",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:58 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "10.5072/EDU/TESTID",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:58,184 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:58,462 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: CreateDoi without a selected role
[32mINFO  2018-10-19 22:22:58[m mds.BaseMdsResource (BaseMdsResource.java:147) - DOIServer : Cannot know which role must be applied
[1;31mERROR 2018-10-19 22:22:58[m mds.BaseMdsResource (BaseMdsResource.java:148) - Throwing
org.restlet.resource.ResourceException: Conflict
	at fr.cnes.doi.resource.mds.BaseMdsResource.getRoleName(BaseMdsResource.java:148) [classes/:?]
	at fr.cnes.doi.resource.mds.BaseMdsResource.checkPermission(BaseMdsResource.java:182) [classes/:?]
	at fr.cnes.doi.resource.mds.DoisResource.createDoi(DoisResource.java:152) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:521) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.post(ServerResource.java:1376) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:621) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
2018-10-19 22:22:58,752 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: CreateDoi through HTTPS server
2018-10-19 22:22:58,767 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 201,
	    "body" : {
	      "type" : "STRING",
	      "string" : "CREATED",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:58,773 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/828606/8c3e91ad45ca855b477126bc073ae44b\nurl=http://www.cnes.fr",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "74" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:58 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/doi"
	}

2018-10-19 22:22:58,774 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 201,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "CREATED",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/828606/8c3e91ad45ca855b477126bc073ae44b\nurl=http://www.cnes.fr",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "74" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:58 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 201,
	  "body" : {
	    "type" : "STRING",
	    "string" : "CREATED",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:58,779 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:59,065 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: CreateDoi
[1;31mERROR 2018-10-19 22:22:59[m mds.BaseMdsResource (BaseMdsResource.java:186) - Throwing
org.restlet.resource.ResourceException: Forbidden
	at fr.cnes.doi.resource.mds.BaseMdsResource.checkPermission(BaseMdsResource.java:186) [classes/:?]
	at fr.cnes.doi.resource.mds.DoisResource.createDoi(DoisResource.java:152) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:521) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.post(ServerResource.java:1376) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:621) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
2018-10-19 22:22:59,358 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: CreateDoi with a not registered DOI
2018-10-19 22:22:59,373 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 412,
	    "body" : {
	      "type" : "STRING",
	      "string" : "metadata must be uploaded first",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:59,386 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/828606/8c3e91ad45ca855b477126bc073ae\nurl=http://www.cnes.fr",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "71" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:59 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/doi"
	}

2018-10-19 22:22:59,386 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 412,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "metadata must be uploaded first",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/828606/8c3e91ad45ca855b477126bc073ae\nurl=http://www.cnes.fr",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "71" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:59 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 412,
	  "body" : {
	    "type" : "STRING",
	    "string" : "metadata must be uploaded first",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

[1;31mERROR 2018-10-19 22:22:59[m mds.DoisResource (DoisResource.java:158) - Throwing
org.restlet.resource.ResourceException: Precondition Failed
	at fr.cnes.doi.resource.mds.DoisResource.createDoi(DoisResource.java:158) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:521) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.post(ServerResource.java:1376) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:621) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
Caused by: fr.cnes.doi.exception.ClientMdsException: Precondition Failed
	at fr.cnes.doi.client.ClientMDS.createDoi(ClientMDS.java:576) ~[classes/:?]
	at fr.cnes.doi.resource.mds.DoisResource.createDoi(DoisResource.java:155) ~[classes/:?]
	... 65 more
Caused by: org.restlet.resource.ResourceException: Precondition Failed
	at org.restlet.resource.ClientResource.doError(ClientResource.java:590) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handleInbound(ClientResource.java:1153) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1048) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1065) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.post(ClientResource.java:1466) ~[org.restlet-3.0-M1.jar:?]
	at fr.cnes.doi.client.ClientMDS.createDoi(ClientMDS.java:572) ~[classes/:?]
	at fr.cnes.doi.resource.mds.DoisResource.createDoi(DoisResource.java:155) ~[classes/:?]
	... 65 more
2018-10-19 22:22:59,393 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:22:59,673 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: CreateDoi through a HTTP server
2018-10-19 22:22:59,678 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 201,
	    "body" : {
	      "type" : "STRING",
	      "string" : "CREATED",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:22:59,690 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/828606/8c3e91ad45ca855b477126bc073ae44b\nurl=http://www.cnes.fr",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "74" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:59 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "POST",
	  "path" : "/doi"
	}

2018-10-19 22:22:59,690 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 201,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "CREATED",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "POST",
	  "path" : "/doi",
	  "body" : {
	    "type" : "STRING",
	    "string" : "doi=10.5072/828606/8c3e91ad45ca855b477126bc073ae44b\nurl=http://www.cnes.fr",
	    "contentType" : "text/plain; charset=utf-8"
	  },
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "Accept" : [ "text/plain" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Content-Length" : [ "74" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:22:59 GMT" ],
	    "Content-Type" : [ "text/plain; charset=UTF-8" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 201,
	  "body" : {
	    "type" : "STRING",
	    "string" : "CREATED",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:22:59,695 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "POST",
	    "path" : "/doi"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.222 sec
Running fr.cnes.doi.resource.mds.DoiResourceTest
[32mINFO  2018-10-19 22:22:59[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:59[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:59[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:59[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:22:59[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:22:59[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:22:59[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:22:59[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
------ TEST DoiResource ------
2018-10-19 22:22:59,991 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: GetDoi http
2018-10-19 22:22:59,996 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:23:00,005 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:23:00 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605"
	}

2018-10-19 22:23:00,006 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:23:00 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:23:00,011 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:23:00,292 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: GetDoi https
2018-10-19 22:23:00,310 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 200,
	    "body" : {
	      "type" : "STRING",
	      "string" : "https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:23:00,366 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:23:00 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605"
	}

2018-10-19 22:23:00,366 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 200,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:23:00 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 200,
	  "body" : {
	    "type" : "STRING",
	    "string" : "https://edutheque.cnes.fr/fr/web/CNES-fr/10884-edutheque.php",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

2018-10-19 22:23:00,372 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

2018-10-19 22:23:00,640 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: GetDoi not allowed https
[1;31mERROR 2018-10-19 22:23:00[m mds.DoiResource (DoiResource.java:138) - Throwing
org.restlet.resource.ResourceException: Bad Request
	at fr.cnes.doi.resource.mds.DoiResource.checkInput(DoiResource.java:138) [classes/:?]
	at fr.cnes.doi.resource.mds.DoiResource.getDoi(DoiResource.java:96) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:524) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.get(ServerResource.java:743) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:618) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
2018-10-19 22:23:00,945 INFO o.m.m.MockServer MockServer started on port: 1081
TEST: GetDoi not found https
2018-10-19 22:23:00,962 INFO o.m.m.HttpStateHandler creating expectation:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "remainingTimes" : 0,
	    "unlimited" : true
	  },
	  "timeToLive" : {
	    "unlimited" : true
	  },
	  "httpResponse" : {
	    "statusCode" : 404,
	    "body" : {
	      "type" : "STRING",
	      "string" : "DOI not found",
	      "contentType" : "text/plain; charset=utf-8"
	    }
	  }
	}

2018-10-19 22:23:00,981 INFO o.m.m.HttpStateHandler request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:23:00 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 matched expectation:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605"
	}

2018-10-19 22:23:00,982 INFO o.m.m.HttpStateHandler returning response:

	{
	  "statusCode" : 404,
	  "headers" : {
	    "connection" : [ "keep-alive" ]
	  },
	  "body" : {
	    "type" : "STRING",
	    "string" : "DOI not found",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

 for request:

	{
	  "method" : "GET",
	  "path" : "/doi/10.5072/2783446.2783605",
	  "headers" : {
	    "Authorization" : [ "Basic dGVzdDp0ZXN0" ],
	    "content-length" : [ "0" ],
	    "Accept" : [ "*/*" ],
	    "User-Agent" : [ "Jetty/9.2.6.v20141205", "Restlet-Framework/3.0m1" ],
	    "Host" : [ "localhost:1081" ],
	    "Accept-Encoding" : [ "gzip" ],
	    "Date" : [ "Fri, 19 Oct 2018 20:23:00 GMT" ]
	  },
	  "keepAlive" : true,
	  "secure" : false
	}

 for response action:

	{
	  "statusCode" : 404,
	  "body" : {
	    "type" : "STRING",
	    "string" : "DOI not found",
	    "contentType" : "text/plain; charset=utf-8"
	  }
	}

[1;31mERROR 2018-10-19 22:23:00[m mds.DoiResource (DoiResource.java:107) - Throwing
org.restlet.resource.ResourceException: Not Found
	at fr.cnes.doi.resource.mds.DoiResource.getDoi(DoiResource.java:107) [classes/:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_181]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_181]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_181]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_181]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:524) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.get(ServerResource.java:743) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doHandle(ServerResource.java:618) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doNegotiatedHandle(ServerResource.java:679) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.doConditionalHandle(ServerResource.java:357) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ServerResource.handle(ServerResource.java:1044) [org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.Finder.handle(Finder.java:236) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.ApplicationHelper.handle(ApplicationHelper.java:75) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Application.handle(Application.java:385) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:744) [org.restlet.ext.wadl-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.doHandle(Router.java:422) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Router.handle(Router.java:639) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.application.StatusFilter.doHandle(StatusFilter.java:140) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.doHandle(Filter.java:150) [org.restlet-3.0-M1.jar:?]
	at org.restlet.routing.Filter.handle(Filter.java:197) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.CompositeHelper.handle(CompositeHelper.java:202) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Component.handle(Component.java:408) [org.restlet-3.0-M1.jar:?]
	at org.restlet.Server.handle(Server.java:507) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.connector.ServerHelper.handle(ServerHelper.java:63) [org.restlet-3.0-M1.jar:?]
	at org.restlet.engine.adapter.HttpServerHelper.handle(HttpServerHelper.java:143) [org.restlet-3.0-M1.jar:?]
	at org.restlet.ext.jetty.JettyServerHelper$WrappedServer.handle(JettyServerHelper.java:273) [org.restlet.ext.jetty-3.0-M1.jar:?]
	at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:313) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:248) [jetty-server-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:540) [jetty-io-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:626) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:546) [jetty-util-9.2.6.v20141205.jar:9.2.6.v20141205]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_181]
Caused by: fr.cnes.doi.exception.ClientMdsException: Not Found
	at fr.cnes.doi.client.ClientMDS.getDoi(ClientMDS.java:500) ~[classes/:?]
	at fr.cnes.doi.resource.mds.DoiResource.getDoi(DoiResource.java:98) ~[classes/:?]
	... 65 more
Caused by: org.restlet.resource.ResourceException: Not Found
	at org.restlet.resource.ClientResource.doError(ClientResource.java:590) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handleInbound(ClientResource.java:1153) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1048) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:1023) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.handle(ClientResource.java:928) ~[org.restlet-3.0-M1.jar:?]
	at org.restlet.resource.ClientResource.get(ClientResource.java:636) ~[org.restlet-3.0-M1.jar:?]
	at fr.cnes.doi.client.ClientMDS.getDoi(ClientMDS.java:497) ~[classes/:?]
	at fr.cnes.doi.resource.mds.DoiResource.getDoi(DoiResource.java:98) ~[classes/:?]
	... 65 more
2018-10-19 22:23:01,001 INFO o.m.m.HttpStateHandler verifying requests that match:

	{
	  "httpRequest" : {
	    "method" : "GET",
	    "path" : "/doi/10.5072/2783446.2783605"
	  },
	  "times" : {
	    "count" : 1,
	    "exact" : true
	  }
	}

Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.301 sec
Running fr.cnes.doi.application.AdminApplicationTest
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:23:01[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:23:01[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
TEST: API through HTTP
TEST: API Wadl
TEST: API through HTTPS
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.357 sec
Running fr.cnes.doi.application.DoiCrossCiteApplicationTest
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:23:01[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:23:01[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
------ TEST DoiCrossCiteApplication ------
TEST: API through HTTP
TEST: API Wadl
TEST: API through HTTPS
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.164 sec
Running fr.cnes.doi.application.DoiMdsApplicationTest
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[32mINFO  2018-10-19 22:23:01[m application.AdminApplication (AdminApplication.java:171) - Sets CheckLandingPage running at each 30 DAYS
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:112) - Allows all origins [*]
[32mINFO  2018-10-19 22:23:01[m application.AbstractApplication (AbstractApplication.java:114) - Allows Credientials true
[33mWARN  2018-10-19 22:23:01[m application.AdminApplication (AdminApplication.java:391) - The website for DOI server is not installed
------ TEST DoiMdsApplication ------
TEST API through HTTP
TEST API Wadl
TEST API through HTTPS
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.408 sec
Running fr.cnes.doi.utils.UniqueProjectNameTest
------ TEST UniqueProjectName ------
TEST: GetShortName
TEST: GetShortNameWithLongName
Tests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running fr.cnes.doi.utils.UtilsTest
------ TEST Utils ------
TEST: Encrypt
TEST: Decrypt
TEST: IsEmpty
Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 sec
Running fr.cnes.doi.settings.JettySettingsTest
------ TEST JettySettings ------
TEST: GetHttpOutputBufferSize
TEST: GetThreadPoolThreadsPriority
TEST: GetThreadPoolMaxThreads
TEST: GetConnectorAcceptors
TEST: GetThreadPoolIdleTimeout
TEST: GetHttpHeaderCacheSize
TEST: GetLowResourceMonitorMaxMemory
TEST: GetLowResourceMonitorIdleTimeout
TEST: GetConnectorSelectors
TEST: GetLowResourceMonitorMaxConnections
TEST: GetHttpRequestHeaderSize
TEST: GetConnectorIdleTimeout
TEST: GetLowResourceMonitorThreads
TEST: GetConnectorAcceptQueueSize
TEST: GetConnectorSoLingerTime
TEST: GetThreadPoolStopTimeout
TEST: GetLowResourceMonitorStopTimeout
TEST: GetLowResourceMonitorPeriod
TEST: GetConnectorStopTimeout
TEST: GetThreadPoolMinThreads
TEST: GetHttpResponseHeaderSize
Tests run: 21, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.005 sec
Running fr.cnes.doi.settings.ProxySettingsTest
------ TEST ProxySettings ------
TEST: GetProxyPassword
TEST: GetProxyAuthentication
TEST: GetProxyHost
TEST: GetProxyPort
TEST: GetProxyUser
TEST: GetNonProxyHosts
TEST: IsWithProxy
Tests run: 7, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.003 sec
Running fr.cnes.doi.settings.DoiSettingsTest
------ TEST DoiSettings ------
TEST: GetInt
TEST: GetInt
TEST: GetLong
TEST: GetLong
TEST: GetBoolean
TEST: GetSecret
TEST: GetString
TEST: GetString
Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec
Running fr.cnes.doi.settings.EmailSettingsTest
------ TEST EmailSettings ------
TEST: GetSmtpProtocol
TEST: GetSmtpURL
TEST: GetDebug
TEST: GetContactAdmin
TEST: GetAuthUser
TEST: GetAuthPwd
TEST: SendMessage
TEST: GetInstance
TEST: SetDebug
TEST: GetTlsEnable
Tests run: 10, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.004 sec
Running fr.cnes.doi.server.DoiMonitoringTest
------ TEST DoiMonitoring ------
TEST: GetCurrentMean
TEST: Register
TEST: GetDescription
TEST: IsRegistered
TEST: AddMeasurement
Tests run: 5, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.001 sec

Results :

Failed tests:   testCreateMetadataObj401(fr.cnes.doi.client.ClientMDSTest): Test the status code expected:<401> but was:<1001>
  testDeleteMetadataObj401(fr.cnes.doi.client.ClientMDSTest): Request not found exactly once, expected:<{(..)
  testGetMetadata401(fr.cnes.doi.client.ClientMDSTest): Request not found exactly once, expected:<{(..)
  testCreateMetadata401(fr.cnes.doi.client.ClientMDSTest): Test the status code expected:<401> but was:<1001>
  testCreateDoi401(fr.cnes.doi.client.ClientMDSTest): Test the status code expected:<401> but was:<1001>

Tests run: 172, Failures: 5, Errors: 0, Skipped: 5

[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] [1;31mBUILD FAILURE[m
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;34mINFO[m] Total time: 01:20 min
[[1;34mINFO[m] Finished at: 2018-10-19T22:23:03+02:00
[[1;34mINFO[m] Final Memory: 33M/808M
[[1;34mINFO[m] [1m------------------------------------------------------------------------[m
[[1;31mERROR[m] Failed to execute goal [32morg.apache.maven.plugins:maven-surefire-plugin:2.12.4:test[m [1m(default-test)[m on project [36mDOI[m: [1;31mThere are test failures.[m
[[1;31mERROR[m] [1;31m[m
[[1;31mERROR[m] [1;31mPlease refer to /home/malapert/NetBeansProjects/DOI-server/target/surefire-reports for the individual test results.[m
[[1;31mERROR[m] -> [1m[Help 1][m
[[1;31mERROR[m] 
[[1;31mERROR[m] To see the full stack trace of the errors, re-run Maven with the [1m-e[m switch.
[[1;31mERROR[m] Re-run Maven using the [1m-X[m switch to enable full debug logging.
[[1;31mERROR[m] 
[[1;31mERROR[m] For more information about the errors and possible solutions, please read the following articles:
[[1;31mERROR[m] [1m[Help 1][m http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException
